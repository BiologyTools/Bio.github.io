\hypertarget{mirror_2bmc_8py_source}{}\doxysection{bmc.\+py}
\label{mirror_2bmc_8py_source}\index{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/mirror/bmc.py@{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/mirror/bmc.py}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00001}00001 \textcolor{comment}{\#!/usr/bin/env python3}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00020}00020 \textcolor{stringliteral}{"{}"{}"{}Boston MicroMachines Corporation deformable mirrors.}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00021}00021 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00023}00023 \textcolor{keyword}{import} ctypes}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00024}00024 \textcolor{keyword}{import} os}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00025}00025 \textcolor{keyword}{import} warnings}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00027}00027 \textcolor{keyword}{import} numpy}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00029}00029 \textcolor{keyword}{import} microscope}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00030}00030 \textcolor{keyword}{import} \mbox{\hyperlink{namespacemicroscope_1_1__utils}{microscope.\_utils}}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00031}00031 \textcolor{keyword}{import} \mbox{\hyperlink{namespacemicroscope_1_1abc}{microscope.abc}}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00032}00032 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00034}00034 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00035}00035     \textcolor{keyword}{import} \mbox{\hyperlink{namespacemicroscope_1_1__wrappers_1_1_b_m_c}{microscope.\_wrappers.BMC}} \textcolor{keyword}{as} BMC}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00036}00036 \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00037}00037     \textcolor{keywordflow}{raise} \mbox{\hyperlink{classmicroscope_1_1_library_load_error}{microscope.LibraryLoadError}}(e) \textcolor{keyword}{from} e}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00039}00039 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00040}\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror}{00040}} \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror}{BMCDeformableMirror}}(}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00041}00041     \mbox{\hyperlink{classmicroscope_1_1__utils_1_1_only_triggers_once_on_software_mixin}{microscope.\_utils.OnlyTriggersOnceOnSoftwareMixin}},}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00042}00042     \mbox{\hyperlink{classmicroscope_1_1abc_1_1_deformable_mirror}{microscope.abc.DeformableMirror}},}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00043}00043 ):}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00044}00044     \textcolor{stringliteral}{"{}"{}"{}Boston MicroMachines (BMC) deformable mirror.}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00045}00045 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00046}00046 \textcolor{stringliteral}{    BMC deformable mirrors only support software trigger.}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00047}00047 \textcolor{stringliteral}{    "{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00048}00048 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00049}00049 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\_\_init\_\_(self, serial\_number: str, **kwargs) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00050}00050         super().\_\_init\_\_(**kwargs)}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00051}00051         self.\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror_a44837d1f313e7c12827c74f5b8d1f49b}{\_dm}} = BMC.DM()}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00053}00053         \textcolor{keywordflow}{if} \_\_debug\_\_:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00054}00054             BMC.ConfigureLog(os.devnull.encode(), BMC.LOG\_ALL)}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00055}00055         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00056}00056             BMC.ConfigureLog(os.devnull.encode(), BMC.LOG\_OFF)}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00058}00058         status = BMC.Open(self.\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror_a44837d1f313e7c12827c74f5b8d1f49b}{\_dm}}, serial\_number.encode())}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00059}00059         \textcolor{keywordflow}{if} status:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00060}00060             \textcolor{keywordflow}{raise} \mbox{\hyperlink{classmicroscope_1_1_initialise_error}{microscope.InitialiseError}}(BMC.ErrorString(status))}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00062}00062     \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00063}00063     \textcolor{keyword}{def }n\_actuators(self) -\/> int:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00064}00064         \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror_a44837d1f313e7c12827c74f5b8d1f49b}{\_dm}}.ActCount}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00066}00066     \textcolor{keyword}{def }\_do\_apply\_pattern(self, pattern: numpy.ndarray) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00067}00067         data\_pointer = pattern.ctypes.data\_as(ctypes.POINTER(ctypes.c\_double))}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00068}00068         status = BMC.SetArray(self.\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror_a44837d1f313e7c12827c74f5b8d1f49b}{\_dm}}, data\_pointer, \textcolor{keywordtype}{None})}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00069}00069         \textcolor{keywordflow}{if} status:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00070}00070             \textcolor{keywordflow}{raise} \mbox{\hyperlink{classmicroscope_1_1_device_error}{microscope.DeviceError}}(BMC.ErrorString(status))}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00072}00072     \textcolor{keyword}{def }\_do\_shutdown(self) -\/> None:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00073}00073         status = BMC.Close(self.\mbox{\hyperlink{classmicroscope_1_1mirror_1_1bmc_1_1_b_m_c_deformable_mirror_a44837d1f313e7c12827c74f5b8d1f49b}{\_dm}})}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00074}00074         \textcolor{keywordflow}{if} status:}
\DoxyCodeLine{\Hypertarget{mirror_2bmc_8py_source_l00075}00075             warnings.warn(BMC.ErrorString(status), RuntimeWarning)}

\end{DoxyCode}
