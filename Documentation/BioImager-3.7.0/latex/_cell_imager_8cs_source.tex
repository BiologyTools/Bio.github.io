\hypertarget{_cell_imager_8cs_source}{}\doxysection{Cell\+Imager.\+cs}
\label{_cell_imager_8cs_source}\index{F:/repos/BioImager/BioImager/Source/CellImager.cs@{F:/repos/BioImager/BioImager/Source/CellImager.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00001}00001 \textcolor{keyword}{using }AForge.Imaging.Filters;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00002}00002 \textcolor{keyword}{using }AForge.Imaging;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00003}00003 \textcolor{keyword}{using }AForge.Math.Geometry;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00004}00004 \textcolor{keyword}{using }AForge;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00005}00005 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_bio_imager}{BioImager}};}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00006}00006 \textcolor{keyword}{using }System;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00007}00007 \textcolor{keyword}{using }System.Collections.Generic;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00008}00008 \textcolor{keyword}{using }System.ComponentModel;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00009}00009 \textcolor{keyword}{using }System.Data;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00010}00010 \textcolor{keyword}{using }System.Drawing;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00011}00011 \textcolor{keyword}{using }System.Linq;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00012}00012 \textcolor{keyword}{using }System.Text;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00013}00013 \textcolor{keyword}{using }System.Threading.Tasks;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00014}00014 \textcolor{keyword}{using }System.Windows.Forms;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00016}00016 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_bio_imager}{BioImager}}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00017}00017 \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00018}\mbox{\hyperlink{class_bio_imager_1_1_cell_imager}{00018}}     \textcolor{keyword}{public} \textcolor{keyword}{partial class }\mbox{\hyperlink{class_bio_imager_1_1_cell_imager}{CellImager}} : Form}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00019}00019     \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00020}00020         \mbox{\hyperlink{class_bio_imager_1_1_image_view}{ImageView}} viewer;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00021}00021         List<Blob> blobs = \textcolor{keyword}{new} List<Blob>();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00022}00022         List<BioImage> images = \textcolor{keyword}{new} List<BioImage>();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00023}00023         \mbox{\hyperlink{class_bio_imager_1_1_bio_image}{BioImage}} b;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00024}00024         System.Drawing.Bitmap bitmap;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00025}00025         \textcolor{keyword}{public} \mbox{\hyperlink{class_bio_imager_1_1_cell_imager}{CellImager}}()}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00026}00026         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00027}00027             InitializeComponent();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00028}00028             viewer = \textcolor{keyword}{new} \mbox{\hyperlink{class_bio_imager_1_1_image_view}{ImageView}}();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00029}00029             viewer.ShowControls = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00030}00030             imageSplitContainer.Panel2.Controls.Add(viewer);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00031}00031             \textcolor{keywordflow}{foreach} (var item \textcolor{keywordflow}{in} Microscope.Objectives.List)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00032}00032             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00033}00033                 objectivesBox.Items.Add(item.Name);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00034}00034             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00035}00035             objectivesBox.SelectedIndex = Microscope.Objectives.Index;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00036}00036             maxWidthLabel.Text = \textcolor{stringliteral}{"{}Max Width:"{}} + maxWidthBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00037}00037             maxHeightLabel.Text = \textcolor{stringliteral}{"{}Max Height:"{}} + maxHeightBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00038}00038             minHeightLabel.Text = \textcolor{stringliteral}{"{}Min Height:"{}} + minHeightBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00039}00039             minWidthLabel.Text = \textcolor{stringliteral}{"{}Min Width:"{}} + minWidthBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00040}00040             \textcolor{keywordflow}{foreach} (\mbox{\hyperlink{class_bio_imager_1_1_scripting}{Scripting}}.\mbox{\hyperlink{class_bio_imager_1_1_scripting_1_1_script}{Script}} item in \mbox{\hyperlink{class_bio_imager_1_1_scripting}{Scripting}}.Scripts.Values)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00041}00041             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00042}00042                 comboBox.Items.Add(item);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00043}00043             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00044}00044         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00045}00045         }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00046}00046         \textcolor{keyword}{private} \textcolor{keywordtype}{void} maxWidthBar\_Scroll(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00047}00047         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00048}00048             maxWidthLabel.Text = \textcolor{stringliteral}{"{}Max Width:"{}} + maxWidthBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00049}00049         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00051}00051         \textcolor{keyword}{private} \textcolor{keywordtype}{void} maxHeightBar\_Scroll(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00052}00052         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00053}00053             maxHeightLabel.Text = \textcolor{stringliteral}{"{}Max Height:"{}} + maxHeightBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00054}00054         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00056}00056         \textcolor{keyword}{private} \textcolor{keywordtype}{void} minHeightBar\_Scroll(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00057}00057         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00058}00058             minHeightLabel.Text = \textcolor{stringliteral}{"{}Min Height:"{}} + minHeightBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00059}00059         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00061}00061         \textcolor{keyword}{private} \textcolor{keywordtype}{void} sizeBar\_Scroll(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00062}00062         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00063}00063             minWidthLabel.Text = \textcolor{stringliteral}{"{}Min Width:"{}} + minWidthBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00064}00064         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00066}00066         \textcolor{keyword}{private} \textcolor{keywordtype}{void} thresholdBar\_Scroll(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00067}00067         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00068}00068             thresholdLabel.Text = \textcolor{stringliteral}{"{}Threshold:"{}} + thresholdBar.Value;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00069}00069         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00071}00071         }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00073}00073         \textcolor{keyword}{private} \textcolor{keywordtype}{void} helpToolStripMenuItem\_Click(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00074}00074         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00075}00075             MessageBox.Show(\textcolor{stringliteral}{"{}Cell Imager allows for performing imaging routines on individual cells based on blob detection."{}} +}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00076}00076                 \textcolor{stringliteral}{"{} Set threshold and size range for detection. Also allows for an imaging script to be run on each cell."{}});}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00077}00077         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00078}00078 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00079}00079         \textcolor{keyword}{private} \textcolor{keywordtype}{void} detectBut\_Click(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00080}00080         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00081}00081             b = Microscope.TakeImage(\textcolor{keyword}{false},\textcolor{keyword}{false},\textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00082}00082             bitmap = \textcolor{keyword}{new} System.Drawing.Bitmap(b.SizeX, b.SizeY);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00083}00083             }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00084}00084             Statistics[] sts = Statistics.FromBytes(b.Buffers[0]);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00085}00085             Statistics st = sts[0];}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00086}00086             Threshold th;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00087}00087             \textcolor{keywordflow}{if} (numericRBut.Checked)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00088}00088             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00089}00089                 th = \textcolor{keyword}{new} Threshold(thresholdBar.Value);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00090}00090             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00091}00091             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00092}00092                 th = \textcolor{keyword}{new} Threshold((\textcolor{keywordtype}{int})(st.Median));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00093}00093             AForge.Bitmap bf = b.\mbox{\hyperlink{class_bio_imager_1_1_bio_image_aa2fad11027fd57522bf19cf2db5a2c93}{GetBitmap}}(0, (\textcolor{keywordtype}{int})chanBox.Value-\/1, 0);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00094}00094             \textcolor{keywordflow}{if} (bf.RGBChannelsCount > 1)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00095}00095             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00096}00096                 ExtractChannel ch = \textcolor{keyword}{new} ExtractChannel((\textcolor{keywordtype}{short})(rgbBox.Value-\/1));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00097}00097                 bf = ch.Apply(bf);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00098}00098             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00099}00099             th.ApplyInPlace(bf);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00100}00100             Invert inv = \textcolor{keyword}{new} Invert();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00101}00101             inv.ApplyInPlace(bf);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00102}00102             AForge.Bitmap det;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00103}00103             \textcolor{keywordflow}{if} (bf.BitsPerPixel > 8)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00104}00104                 det = AForge.Imaging.Image.Convert16bppTo8bpp(bf);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00105}00105             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00106}00106                 det = bf;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00107}00107             pictureBox.Image = \textcolor{keyword}{new} System.Drawing.Bitmap(det.Width, det.Height, det.Width * 4, System.Drawing.Imaging.PixelFormat.Format32bppArgb, det.RGBData);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00108}00108             BlobCounter blobCounter = \textcolor{keyword}{new} BlobCounter();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00109}00109             blobCounter.ProcessImage(det);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00110}00110             Blob[] bls = blobCounter.GetObjectsInformation();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00111}00111             blobs.Clear();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00112}00112             \textcolor{keywordflow}{foreach} (Blob blob \textcolor{keywordflow}{in} bls)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00113}00113             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00114}00114                 \textcolor{keywordflow}{if} (blob.Rectangle.Width < minWidthBar.Value || blob.Rectangle.Height < minHeightBar.Value || blob.Rectangle.Width > maxWidthBar.Value || blob.Rectangle.Height > maxHeightBar.Value)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00115}00115                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00116}00116                 blobs.Add(blob);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00117}00117             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00118}00118             UpdateItems();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00119}00119         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00121}00121         \textcolor{keyword}{private} \textcolor{keywordtype}{void} UpdateItems()}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00122}00122         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00123}00123             listView.Clear();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00124}00124             \textcolor{keywordflow}{foreach} (Blob blob \textcolor{keywordflow}{in} blobs)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00125}00125             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00126}00126                 ListViewItem item = \textcolor{keyword}{new} ListViewItem(blob.Rectangle.Width + \textcolor{stringliteral}{"{},"{}} + blob.Rectangle.Height);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00127}00127                 item.Tag = blob;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00128}00128                 listView.Items.Add(item);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00129}00129             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00130}00130         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00131}00131 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00132}00132         \textcolor{keyword}{public} \textcolor{keywordtype}{void} Image(Blob[] blobs)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00133}00133         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00134}00134             Point3D p = Microscope.GetPosition();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00135}00135             \textcolor{keywordtype}{int} o = Microscope.Objectives.Index;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00136}00136             \textcolor{keywordflow}{foreach} (Blob blob \textcolor{keywordflow}{in} blobs)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00137}00137             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00138}00138                 \textcolor{keywordflow}{if} (blob.Rectangle.Width < minWidthBar.Value || blob.Rectangle.Height < minHeightBar.Value || blob.Rectangle.Width > maxWidthBar.Value || blob.Rectangle.Height > maxHeightBar.Value)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00139}00139                     \textcolor{keywordflow}{continue};}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00140}00140                 PointD loc = \textcolor{keyword}{new} PointD(b.StageSizeX + (blob.Rectangle.X * b.PhysicalSizeX), b.StageSizeY + (blob.Rectangle.Y * b.PhysicalSizeY));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00141}00141                 Microscope.Objectives.SetPosition(objectivesBox.SelectedIndex);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00142}00142                 Microscope.SetPosition(loc);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00143}00143                 \textcolor{keywordflow}{if}(tileBox.Checked)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00144}00144                 \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00145}00145                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} y = 0; y < tileYBox.Value; y++)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00146}00146                     \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00147}00147                         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} x = 0; x < tileXBox.Value; x++)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00148}00148                         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00149}00149                             \textcolor{keywordflow}{if} (comboBox.SelectedIndex != -\/1)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00150}00150                                 ((\mbox{\hyperlink{class_bio_imager_1_1_scripting}{Scripting}}.\mbox{\hyperlink{class_bio_imager_1_1_scripting_1_1_script}{Script}})comboBox.SelectedItem).Run();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00151}00151                             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00152}00152                             images.AddRange(Microscope.TakeTiles((\textcolor{keywordtype}{int})tileXBox.Value,(int)tileYBox.Value));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00153}00153                         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00154}00154                     \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00155}00155                 \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00156}00156                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00157}00157                 \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00158}00158                     \textcolor{keywordflow}{if} (comboBox.SelectedIndex != -\/1)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00159}00159                         ((\mbox{\hyperlink{class_bio_imager_1_1_scripting}{Scripting}}.\mbox{\hyperlink{class_bio_imager_1_1_scripting_1_1_script}{Script}})comboBox.SelectedItem).Run();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00160}00160                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00161}00161                         images.Add(Microscope.TakeImage(\textcolor{keyword}{false},\textcolor{keyword}{false},\textcolor{keyword}{false}));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00162}00162                 \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00163}00163             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00164}00164             Microscope.Objectives.SetPosition(o);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00165}00165             Microscope.SetPosition(p);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00166}00166             viewer.Images.Clear();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00167}00167             viewer.Images.AddRange(images);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00168}00168             viewer.\mbox{\hyperlink{class_bio_imager_1_1_image_view_adc65e6e60745ab28f68c3e63642f547e}{UpdateView}}();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00169}00169         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00170}00170 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00171}00171         \textcolor{keyword}{private} \textcolor{keywordtype}{void} clearBut\_Click(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00172}00172         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00173}00173             viewer.RemoveImages();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00174}00174         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00175}00175 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00176}00176         \textcolor{keyword}{private} \textcolor{keywordtype}{void} pictureBox\_Paint(\textcolor{keywordtype}{object} sender, PaintEventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00177}00177         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00178}00178             \textcolor{keywordflow}{if}(bitmap==\textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00179}00179                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00180}00180             System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bitmap);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00181}00181             \textcolor{keywordtype}{int} i = 0;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00182}00182             Pen bb = \textcolor{keyword}{new} Pen(Brushes.Blue, 2);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00183}00183             Pen r = \textcolor{keyword}{new} Pen(Brushes.Red, 2);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00184}00184             \textcolor{keywordflow}{foreach} (Blob b \textcolor{keywordflow}{in} blobs)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00185}00185             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00186}00186                 \textcolor{keywordflow}{if} (listView.Items[i].Selected)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00187}00187                     g.DrawRectangle(bb, \textcolor{keyword}{new} System.Drawing.Rectangle(b.Rectangle.X, b.Rectangle.Y, b.Rectangle.Width, b.Rectangle.Height));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00188}00188                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00189}00189                     g.DrawRectangle(r, \textcolor{keyword}{new} System.Drawing.Rectangle(b.Rectangle.X, b.Rectangle.Y, b.Rectangle.Width, b.Rectangle.Height));}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00190}00190                 i++;}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00191}00191             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00192}00192             bb.Dispose();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00193}00193             r.Dispose();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00194}00194             g.Dispose();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00195}00195             e.Graphics.DrawImage(bitmap, 0, 0,pictureBox.Width,pictureBox.Height);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00196}00196         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00197}00197 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00198}00198         \textcolor{keyword}{private} \textcolor{keywordtype}{void} imageAllBut\_Click(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00199}00199         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00200}00200             Image(blobs.ToArray());}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00201}00201         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00202}00202 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00203}00203         \textcolor{keyword}{private} \textcolor{keywordtype}{void} imageCurBut\_Click(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00204}00204         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00205}00205             List<Blob> blobs = \textcolor{keyword}{new} List<Blob>();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00206}00206             \textcolor{keywordflow}{foreach} (ListViewItem blob \textcolor{keywordflow}{in} listView.Items)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00207}00207             \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00208}00208                 \textcolor{keywordflow}{if}(blob.Selected)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00209}00209                 blobs.Add((Blob)blob.Tag);}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00210}00210             \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00211}00211             Image(blobs.ToArray());}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00212}00212         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00213}00213 }
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00214}00214         \textcolor{keyword}{private} \textcolor{keywordtype}{void} listView\_SelectedIndexChanged(\textcolor{keywordtype}{object} sender, EventArgs e)}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00215}00215         \{}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00216}00216             pictureBox.Invalidate();}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00217}00217         \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00218}00218     \}}
\DoxyCodeLine{\Hypertarget{_cell_imager_8cs_source_l00219}00219 \}}

\end{DoxyCode}
