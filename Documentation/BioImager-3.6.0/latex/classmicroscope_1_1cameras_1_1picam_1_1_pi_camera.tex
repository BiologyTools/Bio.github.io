\hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera}{}\doxysection{microscope.\+cameras.\+picam.\+Pi\+Camera Class Reference}
\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera}\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
Inheritance diagram for microscope.\+cameras.\+picam.\+Pi\+Camera\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.403434cm]{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a8958fbb797332a875b157cfc782b1012}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, $\ast$args, $\ast$$\ast$kwargs)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ad945b87e0b6058a21825d201198fe07d}{get\+\_\+awb\+\_\+mode}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a12a5bf8d2d3713d48126bc7d26cd390a}{set\+\_\+awb\+\_\+mode}} (self, val)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3a4164a20cf8fba15dea133db765847c}{set\+\_\+iso\+\_\+mode}} (self, val)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a10272f036fb315426084e003b34775e9}{HW\+\_\+trigger}} (self, channel)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3e6e25f9daf0f4fcb42f40474f2b45b8}{initialize}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa8ee8ee605be37cfcad0104dab8df7ef}{make\+\_\+safe}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa91b849a389efbfe431c43470439046b}{abort}} (self)
\item 
None \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab4591ad6076c8afe5f6201a35bae2c2c}{set\+\_\+trigger}} (self, \mbox{\hyperlink{classmicroscope_1_1_trigger_type}{Trigger\+Type}} ttype, \mbox{\hyperlink{classmicroscope_1_1_trigger_mode}{Trigger\+Mode}} tmode)
\item 
\mbox{\hyperlink{classmicroscope_1_1_trigger_mode}{Trigger\+Mode}} \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a4aace40298ffebdd7a50a3c531725c63}{trigger\+\_\+mode}} (self)
\item 
\mbox{\hyperlink{classmicroscope_1_1_trigger_type}{Trigger\+Type}} \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a28e85b1efe105cb26a86d61c4af7b0b0}{trigger\+\_\+type}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afd91e9e24cc4f9d4704a9fc9c46eac63}{set\+LED}} (self, state=False)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab3d50b09994deb47585bae7360958eb8}{set\+\_\+exposure\+\_\+time}} (self, value)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af63aa3bf60461bb5b66285998de897c8}{get\+\_\+exposure\+\_\+time}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af4e4b15508e4330c289592e9d0438e35}{get\+\_\+cycle\+\_\+time}} (self)
\item 
def \mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a6eb964846db1ee269c82b8191fa03e6e}{soft\+\_\+trigger}} (self)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5440654a2f2c2592685ea6ea8bec05b0}{camera}}
\item 
\mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5ec69cf5f7b1f86758c2a814cf01d633}{roi}}
\item 
\mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afafc78e1f3659591dc9d422a7f554e3b}{exposure\+\_\+time}}
\item 
\mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab76b89bc864bb541ffcbe9ebbc017b47}{cycle\+\_\+time}}
\item 
\mbox{\hyperlink{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5454b69673ffe603dc77edf73c87a8a2}{camversion}}
\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{picam_8py_source_l00050}{50}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a8958fbb797332a875b157cfc782b1012}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a8958fbb797332a875b157cfc782b1012}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{$\ast$}]{buffer\+\_\+length,  }\item[{$\ast$$\ast$}]{kwargs }\end{DoxyParamCaption})}

\begin{DoxyVerb}Derived.__init__ must call this at some point.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_camera_aa83a5fbd2c9d16bd7af0ad180702b365}{microscope.\+abc.\+Camera}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00051}{51}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00051     \textcolor{keyword}{def }\_\_init\_\_(self, *args, **kwargs):}
\DoxyCodeLine{00052         super(PiCamera, self).\_\_init\_\_(**kwargs)}
\DoxyCodeLine{00053         \textcolor{comment}{\# example parameter to allow setting.}}
\DoxyCodeLine{00054         \textcolor{comment}{\#        self.add\_setting('\_error\_percent', 'int',}}
\DoxyCodeLine{00055         \textcolor{comment}{\#                         lambda: self.\_error\_percent,}}
\DoxyCodeLine{00056         \textcolor{comment}{\#                         self.\_set\_error\_percent,}}
\DoxyCodeLine{00057         \textcolor{comment}{\#                         lambda: (0, 100))}}
\DoxyCodeLine{00058         self.\_acquiring = \textcolor{keyword}{False}}
\DoxyCodeLine{00059         self.\_exposure\_time = 0.1}
\DoxyCodeLine{00060         self.\_triggered = \textcolor{keyword}{False}}
\DoxyCodeLine{00061         self.camera = \textcolor{keywordtype}{None}}
\DoxyCodeLine{00062         \textcolor{comment}{\# Region of interest.}}
\DoxyCodeLine{00063         self.roi = ROI(\textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None}, \textcolor{keywordtype}{None})}
\DoxyCodeLine{00064         \textcolor{comment}{\# Cycle time}}
\DoxyCodeLine{00065         self.exposure\_time = 0.001  \textcolor{comment}{\# in seconds}}
\DoxyCodeLine{00066         self.cycle\_time = self.exposure\_time}
\DoxyCodeLine{00067         \textcolor{comment}{\# initialise in soft trigger mode}}
\DoxyCodeLine{00068         self.\_trigger\_type = TriggerType.SOFTWARE}
\DoxyCodeLine{00069         \textcolor{comment}{\# setup hardware triggerline}}
\DoxyCodeLine{00070         GPIO.setmode(GPIO.BCM)}
\DoxyCodeLine{00071         \textcolor{comment}{\# GPIO trigger line is an input}}
\DoxyCodeLine{00072         GPIO.setup(GPIO\_Trigger, GPIO.IN)}
\DoxyCodeLine{00073         \textcolor{comment}{\# GPIO control over camera LED is an output}}
\DoxyCodeLine{00074         GPIO.setup(GPIO\_CAMLED, GPIO.OUT)}
\DoxyCodeLine{00075         \textcolor{comment}{\# add trigger to settings}}
\DoxyCodeLine{00076         trg\_source\_names = [x.name \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} TrgSourceMap]}
\DoxyCodeLine{00077         \textcolor{comment}{\# set up queue to store images as they are acquired}}
\DoxyCodeLine{00078         self.\_queue = queue.Queue()}
\DoxyCodeLine{00079         self.\_awb\_modes = picamera.PiCamera.AWB\_MODES}
\DoxyCodeLine{00080         self.\_iso\_modes = [0, 100, 200, 320, 400, 500, 640, 800]}
\DoxyCodeLine{00081 }
\DoxyCodeLine{00082         \textcolor{keyword}{def }\_trigger\_source\_setter(index: int) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00083             trigger\_type = TrgSourceMap[trg\_source\_names[index]].value}
\DoxyCodeLine{00084             self.set\_trigger(trigger\_type, self.trigger\_mode)}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086         self.add\_setting(}
\DoxyCodeLine{00087             \textcolor{stringliteral}{"{}trig source"{}},}
\DoxyCodeLine{00088             \textcolor{stringliteral}{"{}enum"{}},}
\DoxyCodeLine{00089             \textcolor{keyword}{lambda}: TrgSourceMap(self.\_trigger\_type).name,}
\DoxyCodeLine{00090             \_trigger\_source\_setter,}
\DoxyCodeLine{00091             trg\_source\_names,}
\DoxyCodeLine{00092         )}
\DoxyCodeLine{00093         self.add\_setting(}
\DoxyCodeLine{00094             \textcolor{stringliteral}{"{}AWB"{}},}
\DoxyCodeLine{00095             \textcolor{stringliteral}{"{}enum"{}},}
\DoxyCodeLine{00096             \textcolor{keyword}{lambda}: self.\_awb\_modes[self.get\_awb\_mode()],}
\DoxyCodeLine{00097             \textcolor{keyword}{lambda} awb: self.set\_awb\_mode(awb),}
\DoxyCodeLine{00098             values=(list(self.\_awb\_modes.keys())),}
\DoxyCodeLine{00099         )}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101         self.add\_setting(}
\DoxyCodeLine{00102             \textcolor{stringliteral}{"{}ISO"{}},}
\DoxyCodeLine{00103             \textcolor{stringliteral}{"{}enum"{}},}
\DoxyCodeLine{00104             \textcolor{keyword}{lambda}: self.\_iso\_modes.index(self.camera.iso),}
\DoxyCodeLine{00105             \textcolor{keyword}{lambda} iso: self.set\_iso\_mode(iso),}
\DoxyCodeLine{00106             values=(self.\_iso\_modes),}
\DoxyCodeLine{00107         )}
\DoxyCodeLine{00108 }
\DoxyCodeLine{00109         \textcolor{comment}{\# self.add\_setting(}}
\DoxyCodeLine{00110         \textcolor{comment}{\#     "{}pixel size"{},}}
\DoxyCodeLine{00111         \textcolor{comment}{\#     "{}float"{},}}
\DoxyCodeLine{00112         \textcolor{comment}{\#     lambda: self.\_pixel\_size,}}
\DoxyCodeLine{00113         \textcolor{comment}{\#     lambda pxsz: setattr(self, "{}\_pixel\_size"{}, pxsz),}}
\DoxyCodeLine{00114         \textcolor{comment}{\#     \# technically should be: (nextafter(0.0, inf), nextafter(inf, 0.0))}}
\DoxyCodeLine{00115         \textcolor{comment}{\#     values=(0.0, float("{}inf"{})),}}
\DoxyCodeLine{00116         \textcolor{comment}{\# )}}
\DoxyCodeLine{00117         self.initialize()}
\DoxyCodeLine{00118 }

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa91b849a389efbfe431c43470439046b}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa91b849a389efbfe431c43470439046b}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!abort@{abort}}
\index{abort@{abort}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{abort()}{abort()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+abort (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Stop acquisition as soon as possible.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_data_device_a36952a38857bc6c8eb627b2d8b6b867b}{microscope.\+abc.\+Data\+Device}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00186}{186}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00186     \textcolor{keyword}{def }abort(self):}
\DoxyCodeLine{00187         \_logger.info(\textcolor{stringliteral}{"{}Disabling acquisition."{}})}
\DoxyCodeLine{00188         \textcolor{keywordflow}{if} self.\_acquiring:}
\DoxyCodeLine{00189             self.\_acquiring = \textcolor{keyword}{False}}
\DoxyCodeLine{00190 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ad945b87e0b6058a21825d201198fe07d}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ad945b87e0b6058a21825d201198fe07d}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!get\_awb\_mode@{get\_awb\_mode}}
\index{get\_awb\_mode@{get\_awb\_mode}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{get\_awb\_mode()}{get\_awb\_mode()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+get\+\_\+awb\+\_\+mode (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00119}{119}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00119     \textcolor{keyword}{def }get\_awb\_mode(self):}
\DoxyCodeLine{00120         \textcolor{keywordflow}{return} self.camera.awb\_mode}
\DoxyCodeLine{00121 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af4e4b15508e4330c289592e9d0438e35}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af4e4b15508e4330c289592e9d0438e35}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!get\_cycle\_time@{get\_cycle\_time}}
\index{get\_cycle\_time@{get\_cycle\_time}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{get\_cycle\_time()}{get\_cycle\_time()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+get\+\_\+cycle\+\_\+time (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the cycle time in seconds.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_camera_a2048ad36a754b19e2488b77161a08e63}{microscope.\+abc.\+Camera}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00247}{247}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00247     \textcolor{keyword}{def }get\_cycle\_time(self):}
\DoxyCodeLine{00248         \textcolor{comment}{\# fudge to make it work initially}}
\DoxyCodeLine{00249         \textcolor{comment}{\# exposure times are in us, so multiple by 1E-\/6 to get seconds.}}
\DoxyCodeLine{00250         \textcolor{keywordflow}{return} self.camera.exposure\_speed * 1.0e-\/6 + 0.1}
\DoxyCodeLine{00251 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af63aa3bf60461bb5b66285998de897c8}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_af63aa3bf60461bb5b66285998de897c8}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!get\_exposure\_time@{get\_exposure\_time}}
\index{get\_exposure\_time@{get\_exposure\_time}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{get\_exposure\_time()}{get\_exposure\_time()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+get\+\_\+exposure\+\_\+time (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Return the current exposure time in seconds.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_camera_a16e161a6bd61f3968a072971285eb017}{microscope.\+abc.\+Camera}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00243}{243}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00243     \textcolor{keyword}{def }get\_exposure\_time(self):}
\DoxyCodeLine{00244         \textcolor{comment}{\# exposure times are in us, so multiple by 1E-\/6 to get seconds.}}
\DoxyCodeLine{00245         \textcolor{keywordflow}{return} self.camera.exposure\_speed * 1.0e-\/6}
\DoxyCodeLine{00246 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a10272f036fb315426084e003b34775e9}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a10272f036fb315426084e003b34775e9}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!HW\_trigger@{HW\_trigger}}
\index{HW\_trigger@{HW\_trigger}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{HW\_trigger()}{HW\_trigger()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+HW\+\_\+trigger (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{channel }\end{DoxyParamCaption})}

\begin{DoxyVerb}Function called by GPIO interupt, needs to trigger image capture\end{DoxyVerb}
 

Definition at line \mbox{\hyperlink{picam_8py_source_l00130}{130}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00130     \textcolor{keyword}{def }HW\_trigger(self, channel):}
\DoxyCodeLine{00131         \textcolor{stringliteral}{"{}"{}"{}Function called by GPIO interupt, needs to trigger image capture"{}"{}"{}}}
\DoxyCodeLine{00132         \textcolor{keyword}{with} picamera.array.PiYUVArray(self.camera) \textcolor{keyword}{as} output:}
\DoxyCodeLine{00133             self.camera.capture(output, format=\textcolor{stringliteral}{"{}yuv"{}}, use\_video\_port=\textcolor{keyword}{False})}
\DoxyCodeLine{00134             self.\_queue.put(output.array[:, :, 0])}
\DoxyCodeLine{00135 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3e6e25f9daf0f4fcb42f40474f2b45b8}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3e6e25f9daf0f4fcb42f40474f2b45b8}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!initialize@{initialize}}
\index{initialize@{initialize}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{initialize()}{initialize()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+initialize (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}

\begin{DoxyVerb}Initialise the Pi Camera camera.
Open the connection, connect properties and populate settings dict.
\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_device_a84ae82a5c5a20f3906ccdd4229a39023}{microscope.\+abc.\+Device}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00144}{144}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00144     \textcolor{keyword}{def }initialize(self):}
\DoxyCodeLine{00145         \textcolor{stringliteral}{"{}"{}"{}Initialise the Pi Camera camera.}}
\DoxyCodeLine{00146 \textcolor{stringliteral}{        Open the connection, connect properties }\textcolor{keywordflow}{and} populate settings dict.}
\DoxyCodeLine{00147         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{00148 \textcolor{stringliteral}{        }\textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.camera:}
\DoxyCodeLine{00149             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{00150                 \textcolor{comment}{\# initialise camera in still image mode.}}
\DoxyCodeLine{00151                 self.camera = picamera.PiCamera(sensor\_mode=2)}
\DoxyCodeLine{00152             \textcolor{keywordflow}{except}:}
\DoxyCodeLine{00153                 \textcolor{keywordflow}{raise} Exception(\textcolor{stringliteral}{"{}Problem opening camera."{}})}
\DoxyCodeLine{00154         \_logger.info(\textcolor{stringliteral}{"{}Initializing camera."{}})}
\DoxyCodeLine{00155         self.camversion = self.camera.revision}
\DoxyCodeLine{00156         \_logger.info(\textcolor{stringliteral}{"{}cam version "{}} + self.camversion)}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158         \textcolor{comment}{\# create img buffer to hold images.}}
\DoxyCodeLine{00159         \textcolor{comment}{\# disable camera LED by default}}
\DoxyCodeLine{00160         self.setLED(\textcolor{keyword}{False})}
\DoxyCodeLine{00161         self.set\_awb\_mode(0)  \textcolor{comment}{\# set auto white balance to off}}
\DoxyCodeLine{00162         self.\_get\_sensor\_shape()}
\DoxyCodeLine{00163 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa8ee8ee605be37cfcad0104dab8df7ef}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_aa8ee8ee605be37cfcad0104dab8df7ef}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!make\_safe@{make\_safe}}
\index{make\_safe@{make\_safe}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{make\_safe()}{make\_safe()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+make\+\_\+safe (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00164}{164}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00164     \textcolor{keyword}{def }make\_safe(self):}
\DoxyCodeLine{00165         \textcolor{keywordflow}{if} self.\_acquiring:}
\DoxyCodeLine{00166             self.abort()}
\DoxyCodeLine{00167 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a12a5bf8d2d3713d48126bc7d26cd390a}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a12a5bf8d2d3713d48126bc7d26cd390a}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!set\_awb\_mode@{set\_awb\_mode}}
\index{set\_awb\_mode@{set\_awb\_mode}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{set\_awb\_mode()}{set\_awb\_mode()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+set\+\_\+awb\+\_\+mode (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{val }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00122}{122}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00122     \textcolor{keyword}{def }set\_awb\_mode(self, val):}
\DoxyCodeLine{00123         \textcolor{keywordflow}{for} key, value \textcolor{keywordflow}{in} self.\_awb\_modes.items():}
\DoxyCodeLine{00124             \textcolor{keywordflow}{if} value == val:}
\DoxyCodeLine{00125                 self.camera.awb\_mode = key}
\DoxyCodeLine{00126 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab3d50b09994deb47585bae7360958eb8}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab3d50b09994deb47585bae7360958eb8}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!set\_exposure\_time@{set\_exposure\_time}}
\index{set\_exposure\_time@{set\_exposure\_time}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{set\_exposure\_time()}{set\_exposure\_time()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+set\+\_\+exposure\+\_\+time (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{value }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set the exposure time on the device in seconds.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_camera_a925b8831a01c673565ecb97b4f781800}{microscope.\+abc.\+Camera}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00239}{239}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00239     \textcolor{keyword}{def }set\_exposure\_time(self, value):}
\DoxyCodeLine{00240         \textcolor{comment}{\# exposure times are set in us.}}
\DoxyCodeLine{00241         self.camera.shutter\_speed = int(value * 1.0e6)}
\DoxyCodeLine{00242 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3a4164a20cf8fba15dea133db765847c}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a3a4164a20cf8fba15dea133db765847c}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!set\_iso\_mode@{set\_iso\_mode}}
\index{set\_iso\_mode@{set\_iso\_mode}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{set\_iso\_mode()}{set\_iso\_mode()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+set\+\_\+iso\+\_\+mode (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{val }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00127}{127}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00127     \textcolor{keyword}{def }set\_iso\_mode(self, val):}
\DoxyCodeLine{00128         self.camera.iso = self.\_iso\_modes[val]}
\DoxyCodeLine{00129 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab4591ad6076c8afe5f6201a35bae2c2c}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab4591ad6076c8afe5f6201a35bae2c2c}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!set\_trigger@{set\_trigger}}
\index{set\_trigger@{set\_trigger}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{set\_trigger()}{set\_trigger()}}
{\footnotesize\ttfamily  None microscope.\+cameras.\+picam.\+Pi\+Camera.\+set\+\_\+trigger (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classmicroscope_1_1_trigger_type}{Trigger\+Type}}}]{ttype,  }\item[{\mbox{\hyperlink{classmicroscope_1_1_trigger_mode}{Trigger\+Mode}}     }]{tmode }\end{DoxyParamCaption})}

\begin{DoxyVerb}Set device for a specific trigger.\end{DoxyVerb}
 

Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_trigger_target_mixin_a3c74f4111c799b181a6168d35474def0}{microscope.\+abc.\+Trigger\+Target\+Mixin}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00191}{191}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00193     ) -\/> \textcolor{keywordtype}{None}:}
\DoxyCodeLine{00194         \textcolor{keywordflow}{if} ttype == self.\_trigger\_type:}
\DoxyCodeLine{00195             \textcolor{keywordflow}{return}}
\DoxyCodeLine{00196         \textcolor{keywordflow}{elif} ttype == TriggerType.SOFTWARE:}
\DoxyCodeLine{00197             GPIO.remove\_event\_detect(GPIO\_Trigger)}
\DoxyCodeLine{00198             self.\_trigger\_type = TriggerType.SOFTWARE}
\DoxyCodeLine{00199         \textcolor{keywordflow}{elif} ttype == TriggerType.RISING\_EDGE:}
\DoxyCodeLine{00200             GPIO.add\_event\_detect(}
\DoxyCodeLine{00201                 GPIO\_Trigger,}
\DoxyCodeLine{00202                 GPIO.RISING,}
\DoxyCodeLine{00203                 callback=self.HW\_trigger,}
\DoxyCodeLine{00204                 bouncetime=10,}
\DoxyCodeLine{00205             )}
\DoxyCodeLine{00206             self.\_trigger\_type = TriggerType.RISING\_EDGE}
\DoxyCodeLine{00207 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afd91e9e24cc4f9d4704a9fc9c46eac63}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afd91e9e24cc4f9d4704a9fc9c46eac63}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!setLED@{setLED}}
\index{setLED@{setLED}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{setLED()}{setLED()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+set\+LED (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{state = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00236}{236}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00236     \textcolor{keyword}{def }setLED(self, state=False):}
\DoxyCodeLine{00237         GPIO.output(GPIO\_CAMLED, state)}
\DoxyCodeLine{00238 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a6eb964846db1ee269c82b8191fa03e6e}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a6eb964846db1ee269c82b8191fa03e6e}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!soft\_trigger@{soft\_trigger}}
\index{soft\_trigger@{soft\_trigger}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{soft\_trigger()}{soft\_trigger()}}
{\footnotesize\ttfamily def microscope.\+cameras.\+picam.\+Pi\+Camera.\+soft\+\_\+trigger (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{picam_8py_source_l00263}{263}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00263     \textcolor{keyword}{def }soft\_trigger(self):}
\DoxyCodeLine{00264         \_logger.info(}
\DoxyCodeLine{00265             \textcolor{stringliteral}{"{}Trigger received; self.\_acquiring is \%s."{}} \% self.\_acquiring}
\DoxyCodeLine{00266         )}
\DoxyCodeLine{00267         \textcolor{keywordflow}{if} self.\_acquiring:}
\DoxyCodeLine{00268             \textcolor{keyword}{with} picamera.array.PiYUVArray(self.camera) \textcolor{keyword}{as} output:}
\DoxyCodeLine{00269                 self.camera.capture(output, format=\textcolor{stringliteral}{"{}yuv"{}}, use\_video\_port=\textcolor{keyword}{False})}
\DoxyCodeLine{00270                 self.\_queue.put(output.array[:, :, 0])}
\DoxyCodeLine{00271 }
\DoxyCodeLine{00272 }
\DoxyCodeLine{00273 \textcolor{comment}{\# ongoing implemetation notes}}
\DoxyCodeLine{00274 }
\DoxyCodeLine{00275 \textcolor{comment}{\# should be able to use rotation and hflip to set specific output image}}
\DoxyCodeLine{00276 \textcolor{comment}{\# rotations}}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278 \textcolor{comment}{\# roi's can be set with the zoom function, default is (0,0,1,1) meaning all the data.}}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280 \textcolor{comment}{\# Need to setup a buffer for harware triggered data aquisition so we can}}
\DoxyCodeLine{00281 \textcolor{comment}{\# call the acquisition and then download the data at our leasure}}

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a4aace40298ffebdd7a50a3c531725c63}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a4aace40298ffebdd7a50a3c531725c63}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!trigger\_mode@{trigger\_mode}}
\index{trigger\_mode@{trigger\_mode}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{trigger\_mode()}{trigger\_mode()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classmicroscope_1_1_trigger_mode}{Trigger\+Mode}} microscope.\+cameras.\+picam.\+Pi\+Camera.\+trigger\+\_\+mode (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_trigger_target_mixin_ae7007f4ba2c462e3214ea06abf7398f3}{microscope.\+abc.\+Trigger\+Target\+Mixin}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00209}{209}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00209     \textcolor{keyword}{def }trigger\_mode(self) -\/> TriggerMode:}
\DoxyCodeLine{00210         \textcolor{comment}{\#        if self.\_trigger\_type==devices.TRIGGER\_BEFORE:}}
\DoxyCodeLine{00211         \textcolor{keywordflow}{return} TriggerMode.ONCE}
\DoxyCodeLine{00212 }

\end{DoxyCode}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a28e85b1efe105cb26a86d61c4af7b0b0}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a28e85b1efe105cb26a86d61c4af7b0b0}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!trigger\_type@{trigger\_type}}
\index{trigger\_type@{trigger\_type}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{trigger\_type()}{trigger\_type()}}
{\footnotesize\ttfamily  \mbox{\hyperlink{classmicroscope_1_1_trigger_type}{Trigger\+Type}} microscope.\+cameras.\+picam.\+Pi\+Camera.\+trigger\+\_\+type (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Reimplemented from \mbox{\hyperlink{classmicroscope_1_1abc_1_1_trigger_target_mixin_a04e0920d33c9b5c7cedcaba7c41053e3}{microscope.\+abc.\+Trigger\+Target\+Mixin}}.



Definition at line \mbox{\hyperlink{picam_8py_source_l00217}{217}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00217     \textcolor{keyword}{def }trigger\_type(self) -\/> TriggerType:}
\DoxyCodeLine{00218         \textcolor{keywordflow}{return} self.\_trigger\_type}
\DoxyCodeLine{00219 }

\end{DoxyCode}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5440654a2f2c2592685ea6ea8bec05b0}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5440654a2f2c2592685ea6ea8bec05b0}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!camera@{camera}}
\index{camera@{camera}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{camera}{camera}}
{\footnotesize\ttfamily microscope.\+cameras.\+picam.\+Pi\+Camera.\+camera}



Definition at line \mbox{\hyperlink{picam_8py_source_l00061}{61}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.

\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5454b69673ffe603dc77edf73c87a8a2}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5454b69673ffe603dc77edf73c87a8a2}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!camversion@{camversion}}
\index{camversion@{camversion}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{camversion}{camversion}}
{\footnotesize\ttfamily microscope.\+cameras.\+picam.\+Pi\+Camera.\+camversion}



Definition at line \mbox{\hyperlink{picam_8py_source_l00155}{155}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.

\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab76b89bc864bb541ffcbe9ebbc017b47}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_ab76b89bc864bb541ffcbe9ebbc017b47}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!cycle\_time@{cycle\_time}}
\index{cycle\_time@{cycle\_time}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{cycle\_time}{cycle\_time}}
{\footnotesize\ttfamily microscope.\+cameras.\+picam.\+Pi\+Camera.\+cycle\+\_\+time}



Definition at line \mbox{\hyperlink{picam_8py_source_l00066}{66}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.

\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afafc78e1f3659591dc9d422a7f554e3b}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_afafc78e1f3659591dc9d422a7f554e3b}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!exposure\_time@{exposure\_time}}
\index{exposure\_time@{exposure\_time}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{exposure\_time}{exposure\_time}}
{\footnotesize\ttfamily microscope.\+cameras.\+picam.\+Pi\+Camera.\+exposure\+\_\+time}



Definition at line \mbox{\hyperlink{picam_8py_source_l00065}{65}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.

\mbox{\Hypertarget{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5ec69cf5f7b1f86758c2a814cf01d633}\label{classmicroscope_1_1cameras_1_1picam_1_1_pi_camera_a5ec69cf5f7b1f86758c2a814cf01d633}} 
\index{microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}!roi@{roi}}
\index{roi@{roi}!microscope.cameras.picam.PiCamera@{microscope.cameras.picam.PiCamera}}
\doxysubsubsection{\texorpdfstring{roi}{roi}}
{\footnotesize\ttfamily microscope.\+cameras.\+picam.\+Pi\+Camera.\+roi}



Definition at line \mbox{\hyperlink{picam_8py_source_l00063}{63}} of file \mbox{\hyperlink{picam_8py_source}{picam.\+py}}.



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
F\+:/repos/\+Bio\+Imager/\+Bio\+Imager/\+Python\+Microscope/microscope/cameras/\mbox{\hyperlink{picam_8py}{picam.\+py}}\end{DoxyCompactItemize}
