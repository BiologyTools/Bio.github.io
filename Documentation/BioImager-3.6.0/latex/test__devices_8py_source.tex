\hypertarget{test__devices_8py_source}{}\doxysection{test\+\_\+devices.\+py}
\label{test__devices_8py_source}\index{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/testsuite/test\_devices.py@{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/testsuite/test\_devices.py}}
\mbox{\hyperlink{test__devices_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00001}\mbox{\hyperlink{namespacemicroscope_1_1testsuite_1_1test__devices}{00001}} \textcolor{comment}{\#!/usr/bin/env python3}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00020}00020 \textcolor{stringliteral}{"{}"{}"{}Test all the concrete device classes.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00021}00021 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00022}00022 \textcolor{stringliteral}{We have the same tests for all devices of the same type.  To do this,}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00023}00023 \textcolor{stringliteral}{there }\textcolor{keywordflow}{is} a :\textcolor{keyword}{class}:`unittest.TestCase` \textcolor{keyword}{class }for each device thatsubclasses \textcolor{keyword}{from} that device type \textcolor{keyword}{class }of tests.  Each such \textcolor{keyword}{class }only}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00024}00024 needs to implement the `setUp` method.  It may also add device}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00025}00025 specific tests.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00027}00027 Using lasers \textcolor{keyword}{as} example, there \textcolor{keywordflow}{is} a :\textcolor{keyword}{class}:`.LightSourceTests` \textcolor{keyword}{class}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00028}00028 full of `test\_*` methods, each of them a test on its own.  For each}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00029}00029 light source device supported there \textcolor{keywordflow}{is} one test \textcolor{keyword}{class}, e.g.,}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00030}00030 `TestOmicronDeepstarLaser`, \textcolor{keywordflow}{and} `TestCoherentSapphireLaser`.  These}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00031}00031 subclass \textcolor{keyword}{from} both :\textcolor{keyword}{class}:`unittest.TestCase` \textcolor{keywordflow}{and} `LightSourceTests`}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00032}00032 \textcolor{keywordflow}{and} need only to implement `setUp` which sets up the fake \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00033}00033 constructs the device instance required to run the tests.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00035}00035 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00036}00036 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00037}00037 \textcolor{stringliteral}{import unittest}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00038}00038 \textcolor{stringliteral}{import unittest.mock}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00039}00039 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00040}00040 \textcolor{stringliteral}{import numpy}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00041}00041 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00042}00042 \textcolor{stringliteral}{import microscope.testsuite.devices as dummies}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00043}00043 \textcolor{stringliteral}{import microscope.testsuite.mock\_devices as mocks}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00044}00044 \textcolor{stringliteral}{from microscope import simulators}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00045}00045 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00046}00046 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00047}00047 \textcolor{stringliteral}{class TestSerialMock(unittest.TestCase):}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00048}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock}{00048}} \textcolor{stringliteral}{    }\textcolor{comment}{\# Our tests for serial devices depend on our SerialMock base}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00049}00049     \textcolor{comment}{\# class working properly so yeah, we need tests for that too.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00050}00050     \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial}{Serial}}(mocks.SerialMock):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00051}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial}{00051}}         eol = b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00052}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial_aa6d2c32169d3918c4008a7623645a118}{00052}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00053}00053         \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial_a105b3d8c8ca4c300ba2e3c4d4cfda2c9}{handle}}(self, command):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00054}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial_a105b3d8c8ca4c300ba2e3c4d4cfda2c9}{00054}}             \textcolor{keywordflow}{if} command.startswith(b\textcolor{stringliteral}{"{}echo "{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00055}00055                 self.in\_buffer.write(command[5:] + self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial_aa6d2c32169d3918c4008a7623645a118}{eol}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00056}00056             \textcolor{keywordflow}{elif} command \textcolor{keywordflow}{in} [b\textcolor{stringliteral}{"{}foo"{}}, b\textcolor{stringliteral}{"{}bar"{}}]:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00057}00057                 \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00058}00058             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00059}00059                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"{}unknown command '\%s'"{}} \% command.decode())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00061}00061     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_adda472bceefa3243620597c264037a18}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00062}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_adda472bceefa3243620597c264037a18}{00062}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}} = \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial}{TestSerialMock.Serial}}()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00063}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{00063}}         patcher = unittest.mock.patch.object(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00064}00064             \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_1_1_serial}{TestSerialMock.Serial}}, \textcolor{stringliteral}{"{}handle"{}}, wraps=self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.handle}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00065}00065         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00066}00066         self.addCleanup(patcher.stop)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00067}00067         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_ab541222bf5308252f3e9ccabfe119c4e}{mock}} = patcher.start()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00068}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_ab541222bf5308252f3e9ccabfe119c4e}{00068}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00069}00069     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a3df65cb4bad9fc2d242f8a24ec82296a}{test\_simple\_commands}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00070}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a3df65cb4bad9fc2d242f8a24ec82296a}{00070}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}foo\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00071}00071         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_ab541222bf5308252f3e9ccabfe119c4e}{mock}}.assert\_called\_once\_with(b\textcolor{stringliteral}{"{}foo"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00072}00072 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00073}00073     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a2e8db0cddbb71d703e90cd7901953536}{test\_partial\_commands}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00074}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a2e8db0cddbb71d703e90cd7901953536}{00074}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}fo"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00075}00075         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}o"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00076}00076         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00077}00077         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.handle.assert\_called\_once\_with(b\textcolor{stringliteral}{"{}foo"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00078}00078 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00079}00079     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a38662fecd9967893c91dfe745d2ecbd4}{test\_multiple\_commands}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00080}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a38662fecd9967893c91dfe745d2ecbd4}{00080}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}foo\(\backslash\)r\(\backslash\)nbar\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00081}00081         calls = [unittest.mock.call(x) \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} [b\textcolor{stringliteral}{"{}foo"{}}, b\textcolor{stringliteral}{"{}bar"{}}]]}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00082}00082         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.handle.mock\_calls, calls)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00084}00084     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a241c7d2ae18df532a7b8c4a851955c10}{test\_unix\_eol}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00085}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a241c7d2ae18df532a7b8c4a851955c10}{00085}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.eol = b\textcolor{stringliteral}{"{}\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00086}00086         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}foo\(\backslash\)nbar\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00087}00087         calls = [unittest.mock.call(x) \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} [b\textcolor{stringliteral}{"{}foo"{}}, b\textcolor{stringliteral}{"{}bar"{}}]]}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00088}00088         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.handle.mock\_calls, calls)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00090}00090     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a54b671d815e94d51e86fe4a14431c290}{test\_write}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00091}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a54b671d815e94d51e86fe4a14431c290}{00091}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.write(b\textcolor{stringliteral}{"{}echo qux\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00092}00092         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_serial_mock_a86ca129d0abc8f6c623228f06656aefc}{serial}}.readline(), b\textcolor{stringliteral}{"{}qux\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00093}00093 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00095}00095 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00096}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{00096}}     \textcolor{stringliteral}{"{}"{}"{}Tests cases for all devices.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00097}00097 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00098}00098 \textcolor{stringliteral}{    This collection of tests cover the very basic behaviour of}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00099}00099 \textcolor{stringliteral}{    devices,stuff like initialising }\textcolor{keywordflow}{and} enabling the device.  Classes}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00100}00100     of tests specific to each device type should subclass \textcolor{keyword}{from} it.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00102}00102     Subclasses must define a `device` property during `setUp`, an}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00103}00103     instance of :\textcolor{keyword}{class}:`Device`.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00105}00105     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00106}00106 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00107}00107 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a05b6e64508033b3bcafb90920cf04483}{test\_on\_and\_off}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00108}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a05b6e64508033b3bcafb90920cf04483}{00108}}         \textcolor{stringliteral}{"{}"{}"{}Device can be turned on and off"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00109}00109         self.device.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00110}00110         self.device.shutdown()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00112}00112     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a78a0ef3a8bdd556c22041a3f5f462f7e}{test\_enable\_and\_disable}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00113}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a78a0ef3a8bdd556c22041a3f5f462f7e}{00113}}         \textcolor{comment}{\# TODO: we need to define what happens when enable is called}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00114}00114         \textcolor{comment}{\# and device has not been initialised.  See issue \#69}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00115}00115         self.device.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00116}00116         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00117}00117         self.assertTrue(self.device.enabled)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00118}00118         \textcolor{comment}{\# We don't check if it is disabled after shutdown because}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00119}00119         \textcolor{comment}{\# some devices can't be turned off.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00120}00120         \textcolor{comment}{\# TODO: add a `has\_disabled\_state` to the fake so we can}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00121}00121         \textcolor{comment}{\# query whether we can check about being disabled.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00122}00122         self.device.disable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00123}00123         self.device.shutdown()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00124}00124 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00125}00125     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a3564443f9e31c20886f20674ea9068ca}{test\_enable\_enabled}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00126}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_a3564443f9e31c20886f20674ea9068ca}{00126}}         \textcolor{stringliteral}{"{}"{}"{}Handles enabling of an already enabled device"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00127}00127         self.device.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00128}00128         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00129}00129         self.assertTrue(self.device.enabled)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00130}00130         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00131}00131         self.assertTrue(self.device.enabled)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00132}00132 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00133}00133     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_ab83b807ec75c18d7f545c6155c1dc0a8}{test\_disable\_disabled}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00134}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests_ab83b807ec75c18d7f545c6155c1dc0a8}{00134}}         \textcolor{stringliteral}{"{}"{}"{}Handles disabling of an already disabled device.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00135}00135 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00136}00136 \textcolor{stringliteral}{        Test disabling twice, both before }\textcolor{keywordflow}{and} after enabling it \textcolor{keywordflow}{for}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00137}00137         the first time.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00138}00138         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00139}00139 \textcolor{stringliteral}{        self.device.initialize()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00140}00140 \textcolor{stringliteral}{        self.device.disable()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00141}00141 \textcolor{stringliteral}{        self.device.disable()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00142}00142 \textcolor{stringliteral}{        self.device.enable()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00143}00143 \textcolor{stringliteral}{        self.assertTrue(self.device.enabled)}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00144}00144 \textcolor{stringliteral}{        self.device.disable()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00145}00145 \textcolor{stringliteral}{        self.device.disable()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00146}00146 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00147}00147 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00148}00148 \textcolor{stringliteral}{}\textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_serial_device_tests}{SerialDeviceTests}}:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00149}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_serial_device_tests}{00149}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_serial_device_tests_aedd0e2cea3254541df22b5165abd4999}{test\_connection\_defaults}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00150}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_serial_device_tests_aedd0e2cea3254541df22b5165abd4999}{00150}}         self.assertEqual(self.device.connection.baudrate, self.fake.baudrate)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00151}00151         self.assertEqual(self.device.connection.parity, self.fake.parity)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00152}00152         self.assertEqual(self.device.connection.bytesize, self.fake.bytesize)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00153}00153         self.assertEqual(self.device.connection.stopbits, self.fake.stopbits)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00154}00154         self.assertEqual(self.device.connection.rtscts, self.fake.rtscts)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00155}00155         self.assertEqual(self.device.connection.dsrdtr, self.fake.dsrdtr)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00157}00157 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00158}00158 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests}{LightSourceTests}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00159}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests}{00159}}     \textcolor{stringliteral}{"{}"{}"{}Base class for :class:`LightSource` tests.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00160}00160 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00161}00161 \textcolor{stringliteral}{    This }\textcolor{keyword}{class }implements all the general laser tests and is meant to}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00162}00162     be mixed \textcolor{keyword}{with} :\textcolor{keyword}{class}:`unittest.TestCase`.  Subclasses must}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00163}00163     implement the `setUp` method which must add two properties:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00164}00164 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00165}00165     `device`}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00166}00166         Instance of the :\textcolor{keyword}{class}:`LightSource` implementation being}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00167}00167         tested.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00168}00168 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00169}00169     `fake`}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00170}00170         Object \textcolor{keyword}{with} a multiple attributes that specify the hardware}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00171}00171         \textcolor{keywordflow}{and} control the tests, such \textcolor{keyword}{as} the device max \textcolor{keywordflow}{and} min power}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00172}00172         values.  Such attributes may \textcolor{keyword}{as} well be attributes \textcolor{keywordflow}{in} the}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00173}00173         \textcolor{keyword}{class }that fakes the hardware.}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00175}00175     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00176}00176 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00177}00177 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{assertEqualMW}}(self, first, second, msg=None):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00178}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{00178}}         \textcolor{comment}{\# We could be smarter, but rounding the values should be}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00179}00179         \textcolor{comment}{\# enough to check the values when comparing power levels.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00180}00180         self.assertEqual(round(first), round(second), msg)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00182}00182     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a5b7ba877c45b835585f2747b0648fce2}{test\_get\_is\_on}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00183}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a5b7ba877c45b835585f2747b0648fce2}{00183}}         self.assertEqual(self.device.connection.light, self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00184}00184         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00185}00185         self.assertEqual(self.device.connection.light, self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00186}00186         self.device.disable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00187}00187         self.assertEqual(self.device.connection.light, self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00189}00189     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad3c283ed001da0e8132d02c9896cc228}{test\_off\_after\_constructor}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00190}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad3c283ed001da0e8132d02c9896cc228}{00190}}         \textcolor{comment}{\# Some lasers, such as our Coherent Sapphire emit laser}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00191}00191         \textcolor{comment}{\# radiation as soon as the key is switched on.  We should}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00192}00192         \textcolor{comment}{\# ensure that the laser is turned off during the}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00193}00193         \textcolor{comment}{\# construction.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00194}00194         self.assertFalse(self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00195}00195 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00196}00196     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad4d7091ff8eba38300a7348938e4aab7}{test\_turning\_on\_and\_off}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00197}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad4d7091ff8eba38300a7348938e4aab7}{00197}}         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00198}00198         self.assertTrue(self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00199}00199         self.device.disable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00200}00200         self.assertFalse(self.device.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00201}00201 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00202}00202     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ac4ef42fb1e3a29e65cb767cc1965cc4b}{test\_shutdown}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00203}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ac4ef42fb1e3a29e65cb767cc1965cc4b}{00203}}         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00204}00204         self.device.disable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00205}00205         self.device.shutdown()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00206}00206 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00207}00207     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a59f5f61adbfa7889840d546d13f7169a}{test\_power\_when\_off}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00208}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a59f5f61adbfa7889840d546d13f7169a}{00208}}         self.device.disable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00209}00209         self.assertIsInstance(self.device.power, float)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00210}00210         self.assertEqual(self.device.power, 0.0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00211}00211 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00212}00212     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a1f0177433605e7ba0182a672c844ad64}{test\_setting\_power}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00213}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a1f0177433605e7ba0182a672c844ad64}{00213}}         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00214}00214         self.assertIsInstance(self.device.power, float)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00215}00215         power\_mw = self.device.power * self.fake.max\_power}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00216}00216         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{assertEqualMW}}(power\_mw, self.fake.default\_power)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00217}00217         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{assertEqualMW}}(self.device.power, self.device.get\_set\_power())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00219}00219         new\_power = 0.5}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00220}00220         new\_power\_mw = new\_power * self.fake.max\_power}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00221}00221         self.device.power = new\_power}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00222}00222         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{assertEqualMW}}(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00223}00223             self.device.power * self.fake.max\_power, new\_power\_mw}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00224}00224         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00225}00225         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_acaaa49ccd677b47dffe733fa5ca7cb77}{assertEqualMW}}(new\_power, self.device.get\_set\_power())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00227}00227     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad40184f0d5e6af3336ebe5240933ed15}{test\_setting\_power\_outside\_limit}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00228}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_ad40184f0d5e6af3336ebe5240933ed15}{00228}}         self.device.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00229}00229         self.device.power = -\/0.1}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00230}00230         self.assertEqual(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00231}00231             self.device.power,}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00232}00232             self.fake.min\_power / self.fake.max\_power,}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00233}00233             \textcolor{stringliteral}{"{}clip setting power below 0"{}},}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00234}00234         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00235}00235         self.device.power = 1.1}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00236}00236         self.assertEqual(self.device.power, 1.0, \textcolor{stringliteral}{"{}clip setting power above 1"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00237}00237 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00238}00238     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a4d1714a90c503b2fa3052d9ed524002d}{test\_status}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00239}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests_a4d1714a90c503b2fa3052d9ed524002d}{00239}}         status = self.device.get\_status()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00240}00240         self.assertIsInstance(status, list)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00241}00241         \textcolor{keywordflow}{for} msg \textcolor{keywordflow}{in} status:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00242}00242             self.assertIsInstance(msg, str)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00243}00243 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00244}00244 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00245}00245 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_camera_tests}{CameraTests}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00246}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_camera_tests}{00246}}     \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00247}00247 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00248}00248 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00249}00249 \textcolor{keyword}{class }ControllerTests(DeviceTests):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00250}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_controller_tests}{00250}}     \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00251}00251 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00252}00252 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00253}00253 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests}{FilterWheelTests}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00254}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests}{00254}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_aa27f3e6aec9fa32075e703c87cb701ed}{test\_get\_and\_set\_position}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00255}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_aa27f3e6aec9fa32075e703c87cb701ed}{00255}}         self.assertEqual(self.device.position, 0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00256}00256         max\_pos = self.device.n\_positions -\/ 1}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00257}00257         self.device.position = max\_pos}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00258}00258         self.assertEqual(self.device.position, max\_pos)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00259}00259 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00260}00260     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_ad3b929fe9362a0c9cc1edd98c891592b}{test\_set\_position\_to\_negative}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00261}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_ad3b929fe9362a0c9cc1edd98c891592b}{00261}}         \textcolor{keyword}{with} self.assertRaisesRegex(Exception, \textcolor{stringliteral}{"{}can't move to position"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00262}00262             self.device.position = -\/1}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00263}00263 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00264}00264     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_ade918b9e77118fe81c87a1c9ebbddc78}{test\_set\_position\_above\_limit}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00265}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests_ade918b9e77118fe81c87a1c9ebbddc78}{00265}}         \textcolor{keyword}{with} self.assertRaisesRegex(Exception, \textcolor{stringliteral}{"{}can't move to position"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00266}00266             self.device.position = self.device.n\_positions}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00267}00267 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00268}00268 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00269}00269 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests}{DeformableMirrorTests}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00270}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests}{00270}}     \textcolor{stringliteral}{"{}"{}"{}Collection of test cases for deformable mirrors.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00271}00271 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00272}00272 \textcolor{stringliteral}{    Should have the following properties defined during `setUp`:}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00273}00273 \textcolor{stringliteral}{        `planned\_n\_actuators` (int): number of actuators}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00274}00274 \textcolor{stringliteral}{        `device` (DeformableMirror): the microscope device instance}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00275}00275 \textcolor{stringliteral}{        `fake`: an object }\textcolor{keyword}{with} the method `get\_current\_pattern`}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00276}00276     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00277}00277 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00278}00278 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a823708e535f047bef732ffa789738a1e}{assertCurrentPattern}}(self, expected\_pattern, msg="{}"{}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00279}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a823708e535f047bef732ffa789738a1e}{00279}}         numpy.testing.assert\_array\_equal(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00280}00280             self.fake.get\_current\_pattern(), expected\_pattern, msg}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00281}00281         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00282}00282 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00283}00283     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_ab860503923a623cfbacfe6d1ff7e08f8}{test\_get\_number\_of\_actuators}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00284}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_ab860503923a623cfbacfe6d1ff7e08f8}{00284}}         self.assertIsInstance(self.device.n\_actuators, int)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00285}00285         self.assertGreater(self.device.n\_actuators, 0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00286}00286         self.assertEqual(self.device.n\_actuators, self.planned\_n\_actuators)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00287}00287 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00288}00288     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a6c65d2ee1787ee194b387292872cc7f1}{test\_applying\_pattern}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00289}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a6c65d2ee1787ee194b387292872cc7f1}{00289}}         pattern = numpy.full((self.planned\_n\_actuators,), 0.2)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00290}00290         self.device.apply\_pattern(pattern)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00291}00291         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a823708e535f047bef732ffa789738a1e}{assertCurrentPattern}}(pattern)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00292}00292 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00293}00293     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a083bda6deedecb503f96b0a0f8784254}{test\_out\_of\_range\_pattern}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00294}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a083bda6deedecb503f96b0a0f8784254}{00294}}         \textcolor{comment}{\# While we expect values in the [0 1] range, we should not}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00295}00295         \textcolor{comment}{\# actually be checking for that.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00296}00296         pattern = numpy.zeros((self.planned\_n\_actuators,))}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00297}00297         \textcolor{keywordflow}{for} v \textcolor{keywordflow}{in} [-\/1000, -\/1, 0, 1, 3]:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00298}00298             pattern[:] = v}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00299}00299             self.device.apply\_pattern(pattern)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00300}00300             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a823708e535f047bef732ffa789738a1e}{assertCurrentPattern}}(pattern)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00301}00301 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00302}00302     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a7c542b95f1fc28b339f1aae99d8ac1c0}{test\_software\_triggering}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00303}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a7c542b95f1fc28b339f1aae99d8ac1c0}{00303}}         n\_patterns = 5}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00304}00304         patterns = numpy.random.rand(n\_patterns, self.planned\_n\_actuators)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00305}00305         self.device.queue\_patterns(patterns)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00306}00306         \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} range(n\_patterns):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00307}00307             self.device.next\_pattern()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00308}00308             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a823708e535f047bef732ffa789738a1e}{assertCurrentPattern}}(patterns[i])}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00310}00310     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a8443c0b390db251f6c851191b2cc7ecf}{test\_validate\_pattern\_too\_long}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00311}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a8443c0b390db251f6c851191b2cc7ecf}{00311}}         patterns = numpy.zeros((self.planned\_n\_actuators + 1))}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00312}00312         \textcolor{keyword}{with} self.assertRaisesRegex(Exception, \textcolor{stringliteral}{"{}length of second dimension"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00313}00313             self.device.apply\_pattern(patterns)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00314}00314 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00315}00315     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_af1f40fc72881e225c8eee933fae8c179}{test\_validate\_pattern\_swapped\_dimensions}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00316}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_af1f40fc72881e225c8eee933fae8c179}{00316}}         patterns = numpy.zeros((self.planned\_n\_actuators, 1))}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00317}00317         \textcolor{keyword}{with} self.assertRaisesRegex(Exception, \textcolor{stringliteral}{"{}length of second dimension"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00318}00318             self.device.apply\_pattern(patterns)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00319}00319 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00320}00320     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a1059ee1e51b9a45bed6e55ccd314ca41}{test\_validate\_pattern\_with\_extra\_dimension}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00321}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests_a1059ee1e51b9a45bed6e55ccd314ca41}{00321}}         patterns = numpy.zeros((2, 1, self.planned\_n\_actuators))}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00322}00322         \textcolor{keyword}{with} self.assertRaisesRegex(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00323}00323             Exception, \textcolor{stringliteral}{"{}dimensions \(\backslash\)\(\backslash\)(must be 1 or 2\(\backslash\)\(\backslash\))"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00324}00324         ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00325}00325             self.device.apply\_pattern(patterns)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00326}00326 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00327}00327 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00328}00328 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_s_l_m_tests}{SLMTests}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_device_tests}{DeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00329}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_s_l_m_tests}{00329}}     \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00330}00330 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00331}00331 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00332}00332 \textcolor{keyword}{class }DSPTests(DeviceTests):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00333}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_d_s_p_tests}{00333}}     \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00334}00334 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00335}00335 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00336}00336 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source}{TestDummyLightSource}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests}{LightSourceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00337}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source}{00337}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a24881fddf624c190039a2d5fe0334329}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00338}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a24881fddf624c190039a2d5fe0334329}{00338}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a609e64d365a2776b28662f8d3deae50c}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_light_source}{simulators.SimulatedLightSource}}()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00339}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a609e64d365a2776b28662f8d3deae50c}{00339}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00340}00340         \textcolor{comment}{\# TODO: we need to rethink the test so this is not needed.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00341}00341         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{fake}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a609e64d365a2776b28662f8d3deae50c}{device}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00342}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{00342}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{fake}}.default\_power = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{fake}}.\_set\_point}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00343}00343         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{fake}}.min\_power = 0.0}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00344}00344         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a53d0224bd6524572b4ec36dec545808c}{fake}}.max\_power = 100.0}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00345}00345 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00346}00346     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a4ae83d767fe62fc239107d9781348ef0}{test\_get\_is\_on}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00347}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_light_source_a4ae83d767fe62fc239107d9781348ef0}{00347}}         \textcolor{comment}{\# TODO: this test assumes the connection property to be the}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00348}00348         \textcolor{comment}{\# fake.  We need to rethink how the mock lasers work.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00349}00349         \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00350}00350 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00351}00351 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00352}00352 \textcolor{keyword}{class }TestCoherentSapphireLaser(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00353}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser}{00353}}     unittest.TestCase, LightSourceTests, SerialDeviceTests}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00354}00354 ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00355}00355     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_a9e76d9a65c2eb977dc21a64977c54ae3}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00356}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_a9e76d9a65c2eb977dc21a64977c54ae3}{00356}}         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1lights_1_1sapphire}{microscope.lights.sapphire}} \textcolor{keyword}{import} SapphireLaser}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00357}00357         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1testsuite_1_1mock__devices}{microscope.testsuite.mock\_devices}} \textcolor{keyword}{import} CoherentSapphireLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00358}00358 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00359}00359         \textcolor{keyword}{with} unittest.mock.patch(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00360}00360             \textcolor{stringliteral}{"{}microscope.lights.sapphire.serial.Serial"{}},}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00361}00361             new=CoherentSapphireLaserMock,}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00362}00362         ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00363}00363             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_adcdb2b6478c0f1212a42bbf9940b0284}{device}} = SapphireLaser(\textcolor{stringliteral}{"{}/dev/null"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00364}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_adcdb2b6478c0f1212a42bbf9940b0284}{00364}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_adcdb2b6478c0f1212a42bbf9940b0284}{device}}.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00365}00365 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00366}00366         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_a1c666706dd4ecf5fb3ea62d5da56087f}{fake}} = CoherentSapphireLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00367}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_coherent_sapphire_laser_a1c666706dd4ecf5fb3ea62d5da56087f}{00367}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00368}00368 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00369}00369 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser}{TestCoboltLaser}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_light_source_tests}{LightSourceTests}}, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_serial_device_tests}{SerialDeviceTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00370}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser}{00370}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_ad3a5bd63869c5fd45d90a5cefcf2dfa9}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00371}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_ad3a5bd63869c5fd45d90a5cefcf2dfa9}{00371}}         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1lights_1_1cobolt}{microscope.lights.cobolt}} \textcolor{keyword}{import} CoboltLaser}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00372}00372         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1testsuite_1_1mock__devices}{microscope.testsuite.mock\_devices}} \textcolor{keyword}{import} CoboltLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00373}00373 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00374}00374         \textcolor{keyword}{with} unittest.mock.patch(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00375}00375             \textcolor{stringliteral}{"{}microscope.lights.cobolt.serial.Serial"{}}, new=CoboltLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00376}00376         ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00377}00377             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_a392705bec75948df9046ad9d1c6fd48f}{device}} = CoboltLaser(\textcolor{stringliteral}{"{}/dev/null"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00378}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_a392705bec75948df9046ad9d1c6fd48f}{00378}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_a392705bec75948df9046ad9d1c6fd48f}{device}}.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00379}00379 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00380}00380         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_abc8b1976df2edf729e006b4d3834999a}{fake}} = CoboltLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00381}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_cobolt_laser_abc8b1976df2edf729e006b4d3834999a}{00381}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00382}00382 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00383}00383 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser}{TestOmicronDeepstarLaser}}(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00384}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser}{00384}}     unittest.TestCase, LightSourceTests, SerialDeviceTests}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00385}00385 ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00386}00386     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_a575b535b858adc3df5bc246b4e6c8b64}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00387}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_a575b535b858adc3df5bc246b4e6c8b64}{00387}}         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1lights_1_1deepstar}{microscope.lights.deepstar}} \textcolor{keyword}{import} DeepstarLaser}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00388}00388         \textcolor{keyword}{from} \mbox{\hyperlink{namespacemicroscope_1_1testsuite_1_1mock__devices}{microscope.testsuite.mock\_devices}} \textcolor{keyword}{import} OmicronDeepstarLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00389}00389 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00390}00390         \textcolor{keyword}{with} unittest.mock.patch(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00391}00391             \textcolor{stringliteral}{"{}microscope.lights.deepstar.serial.Serial"{}},}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00392}00392             new=OmicronDeepstarLaserMock,}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00393}00393         ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00394}00394             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}} = DeepstarLaser(\textcolor{stringliteral}{"{}/dev/null"{}})}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00395}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{00395}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.initialize()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00396}00396 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00397}00397         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ad4a9962d942758048093115a39f0b64f}{fake}} = OmicronDeepstarLaserMock}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00398}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ad4a9962d942758048093115a39f0b64f}{00398}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00399}00399     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_abc1b715e40f3aa4ef496bcac1484cbef}{test\_weird\_initial\_state}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00400}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_abc1b715e40f3aa4ef496bcac1484cbef}{00400}}         \textcolor{comment}{\# The initial state of the laser may not be ideal to actual}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00401}00401         \textcolor{comment}{\# turn it on, so test that weird settings are reset to}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00402}00402         \textcolor{comment}{\# something adequate.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00403}00403 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00404}00404         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.internal\_peak\_power = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00405}00405         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.bias\_modulation = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00406}00406         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.digital\_modulation = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00407}00407         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.analog2digital = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00408}00408 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00409}00409         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00410}00410         self.assertTrue(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.get\_is\_on())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00411}00411 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00412}00412         self.assertTrue(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.internal\_peak\_power)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00413}00413         self.assertFalse(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.bias\_modulation)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00414}00414         self.assertFalse(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.digital\_modulation)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00415}00415         self.assertFalse(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_omicron_deepstar_laser_ade21b24463a164c011f9db0e8bda5ba9}{device}}.connection.analog2digital)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00416}00416 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00417}00417 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00418}00418 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera}{TestDummyCamera}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_camera_tests}{CameraTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00419}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera}{00419}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera_a2c0d003c1e3ab172601706209eb2e661}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00420}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera_a2c0d003c1e3ab172601706209eb2e661}{00420}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera_a6d08a5851481d95da50ae3e5a0baeca6}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_camera}{simulators.SimulatedCamera}}()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00421}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_camera_a6d08a5851481d95da50ae3e5a0baeca6}{00421}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00422}00422 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00423}00423 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_image_generator}{TestImageGenerator}}(unittest.TestCase):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00424}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_image_generator}{00424}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_image_generator_a199c506dc47aed559632c0634c517a88}{test\_non\_square\_patterns\_shape}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00425}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_image_generator_a199c506dc47aed559632c0634c517a88}{00425}}         \textcolor{comment}{\# TODO: we should also be testing this via the camera but the}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00426}00426         \textcolor{comment}{\# TestCamera is only square.  In the mean time, we only test}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00427}00427         \textcolor{comment}{\# directly the \_ImageGenerator.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00428}00428         width = 16}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00429}00429         height = 32}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00430}00430         generator = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1___image_generator}{simulators.\_ImageGenerator}}()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00431}00431         patterns = list(generator.get\_methods())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00432}00432         \textcolor{keywordflow}{for} i, pattern \textcolor{keywordflow}{in} enumerate(patterns):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00433}00433             \textcolor{keyword}{with} self.subTest(pattern):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00434}00434                 generator.set\_method(i)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00435}00435                 array = generator.get\_image(width, height, 0, 255)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00436}00436                 \textcolor{comment}{\# In matplotlib, an M-\/wide by N-\/tall image has M columns}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00437}00437                 \textcolor{comment}{\# and N rows, so a shape of (N, M)}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00438}00438                 self.assertEqual(array.shape, (height, width))}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00439}00439 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00440}00440 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00441}00441 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller}{TestDummyController}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_controller_tests}{ControllerTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00442}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller}{00442}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a64eb8ff4ab2acacb58a8d5fc8705a224}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00443}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a64eb8ff4ab2acacb58a8d5fc8705a224}{00443}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a597c29aa67f077139da6ea0d4b46ef21}{laser}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_light_source}{simulators.SimulatedLightSource}}()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00444}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a597c29aa67f077139da6ea0d4b46ef21}{00444}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a00449a5bc4c2f6464b111d1ca526a5f7}{filterwheel}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_filter_wheel}{simulators.SimulatedFilterWheel}}(positions=6)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00445}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a00449a5bc4c2f6464b111d1ca526a5f7}{00445}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_controller}{simulators.SimulatedController}}(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00446}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{00446}}             \{\textcolor{stringliteral}{"{}laser"{}}: self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a597c29aa67f077139da6ea0d4b46ef21}{laser}}, \textcolor{stringliteral}{"{}filterwheel"{}}: self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a00449a5bc4c2f6464b111d1ca526a5f7}{filterwheel}}\}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00447}00447         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00448}00448 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00449}00449     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ad2e262ef86c6384438b1cf58c2de6553}{test\_device\_names}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00450}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ad2e262ef86c6384438b1cf58c2de6553}{00450}}         self.assertSetEqual(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00451}00451             \{\textcolor{stringliteral}{"{}laser"{}}, \textcolor{stringliteral}{"{}filterwheel"{}}\}, set(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices.keys())}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00452}00452         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00453}00453 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00454}00454     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a4804fcac052e73d4566294c040a0b239}{test\_control\_filterwheel}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00455}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_a4804fcac052e73d4566294c040a0b239}{00455}}         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}filterwheel"{}}].position, 0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00456}00456         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}filterwheel"{}}].position = 2}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00457}00457         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}filterwheel"{}}].position, 2)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00458}00458 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00459}00459     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_afc6696619a60b29bf5d44e2c1c8f3835}{test\_control\_laser}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00460}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_afc6696619a60b29bf5d44e2c1c8f3835}{00460}}         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}laser"{}}].power, 0.0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00461}00461         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}laser"{}}].enable()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00462}00462         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}laser"{}}].power = 0.8}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00463}00463         self.assertEqual(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_controller_ac7ee529d20b2f60eca4aeae73b8333ec}{device}}.devices[\textcolor{stringliteral}{"{}laser"{}}].power, 0.8)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00464}00464 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00465}00465 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00466}00466 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_empty_dummy_filter_wheel}{TestEmptyDummyFilterWheel}}(unittest.TestCase):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00467}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_empty_dummy_filter_wheel}{00467}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_empty_dummy_filter_wheel_a67d59024b57c75b34aca4aa24849353a}{test\_zero\_positions}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00468}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_empty_dummy_filter_wheel_a67d59024b57c75b34aca4aa24849353a}{00468}}         \textcolor{keyword}{with} self.assertRaisesRegex(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00469}00469             ValueError, \textcolor{stringliteral}{"{}positions must be a positive number"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00470}00470         ):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00471}00471             \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_filter_wheel}{simulators.SimulatedFilterWheel}}(positions=0)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00472}00472 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00473}00473 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00474}00474 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel}{TestOnePositionFilterWheel}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests}{FilterWheelTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00475}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel}{00475}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel_abb0a862baa12781995b8d28ecbeeb17c}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00476}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel_abb0a862baa12781995b8d28ecbeeb17c}{00476}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel_a0561aa42eaa9d9ed8098b6b38d35c0be}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_filter_wheel}{simulators.SimulatedFilterWheel}}(positions=1)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00477}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_one_position_filter_wheel_a0561aa42eaa9d9ed8098b6b38d35c0be}{00477}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00478}00478 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00479}00479 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel}{TestSixPositionFilterWheel}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_filter_wheel_tests}{FilterWheelTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00480}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel}{00480}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel_a19fca37a7deb0abbd3d78317910f1ffd}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00481}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel_a19fca37a7deb0abbd3d78317910f1ffd}{00481}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel_a097173b22dd9550c64f9cf0f36dd00b5}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_filter_wheel}{simulators.SimulatedFilterWheel}}(positions=6)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00482}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_six_position_filter_wheel_a097173b22dd9550c64f9cf0f36dd00b5}{00482}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00483}00483 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00484}00484 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror}{TestDummyDeformableMirror}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_deformable_mirror_tests}{DeformableMirrorTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00485}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror}{00485}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a90ebf8bd476112ea324f601e49f73044}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00486}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a90ebf8bd476112ea324f601e49f73044}{00486}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a3084cc0e8eff7e2c3fccf3da71f41d0f}{planned\_n\_actuators}} = 86}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00487}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a3084cc0e8eff7e2c3fccf3da71f41d0f}{00487}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a805aba04248158c4b45c5856579d966c}{device}} = \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_deformable_mirror}{simulators.SimulatedDeformableMirror}}(}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00488}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a805aba04248158c4b45c5856579d966c}{00488}}             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a3084cc0e8eff7e2c3fccf3da71f41d0f}{planned\_n\_actuators}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00489}00489         )}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00490}00490         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_af9e86358d41481f59214c753dff24744}{fake}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_a805aba04248158c4b45c5856579d966c}{device}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00491}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_deformable_mirror_af9e86358d41481f59214c753dff24744}{00491}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00492}00492 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00493}00493 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m}{TestDummySLM}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_s_l_m_tests}{SLMTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00494}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m}{00494}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m_a426e26bb407e313ae86573f13776b12e}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00495}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m_a426e26bb407e313ae86573f13776b12e}{00495}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m_acfdc8d0af68ee83b4943ffd7b7a074b1}{device}} = dummies.DummySLM()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00496}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_s_l_m_acfdc8d0af68ee83b4943ffd7b7a074b1}{00496}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00497}00497 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00498}00498 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p}{TestDummyDSP}}(unittest.TestCase, \mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_d_s_p_tests}{DSPTests}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00499}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p}{00499}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p_aa76bb88778a719e2d2751a9b22e1ee74}{setUp}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00500}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p_aa76bb88778a719e2d2751a9b22e1ee74}{00500}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p_a29f6468b558c15fa5799731f91edd508}{device}} = dummies.DummyDSP()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00501}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_dummy_d_s_p_a29f6468b558c15fa5799731f91edd508}{00501}} }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00502}00502 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00503}00503 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_base_device}{TestBaseDevice}}(unittest.TestCase):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00504}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_base_device}{00504}}     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_base_device_a9a22ca3ac0decbcb14899ac8bf6f1415}{test\_unexpected\_kwargs\_raise\_exception}}(self):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00505}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1test__devices_1_1_test_base_device_a9a22ca3ac0decbcb14899ac8bf6f1415}{00505}}         \textcolor{stringliteral}{"{}"{}"{}Unexpected kwargs on constructor raise exception.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00506}00506 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00507}00507 \textcolor{stringliteral}{        Test first that we can construct the device.  Then test that}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00508}00508 \textcolor{stringliteral}{        it fails }\textcolor{keywordflow}{if} there are unused kwargs.  This \textcolor{keywordflow}{is} an issue when}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00509}00509         there are default arguments, there\textcolor{stringliteral}{'s a typo on the argument}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00510}00510 \textcolor{stringliteral}{        name, }\textcolor{keywordflow}{and} the \textcolor{keyword}{class }uses the default instead of an error.  See}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00511}00511         issue \textcolor{comment}{\#84.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00512}00512         \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00513}00513 \textcolor{stringliteral}{        \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_light_source}{simulators.SimulatedLightSource}}()}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00514}00514 \textcolor{stringliteral}{        }\textcolor{comment}{\# XXX: Device.\_\_del\_\_ calls shutdown().  However, if \_\_init\_\_}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00515}00515         \textcolor{comment}{\# failed the device is not complete and shutdown() fails}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00516}00516         \textcolor{comment}{\# because the logger has not been created.  See comments on}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00517}00517         \textcolor{comment}{\# issue \#69.  patch \_\_del\_\_ to workaround this issue.}}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00518}00518         \textcolor{keyword}{with} unittest.mock.patch(\textcolor{stringliteral}{"{}microscope.devices.Device.\_\_del\_\_"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00519}00519             \textcolor{keyword}{with} self.assertRaisesRegex(TypeError, \textcolor{stringliteral}{"{}argument 'power'"{}}):}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00520}00520                 \mbox{\hyperlink{classmicroscope_1_1simulators_1_1_simulated_light_source}{simulators.SimulatedLightSource}}(power=2)}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00521}00521 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00522}00522 }
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00523}00523 \textcolor{keywordflow}{if} \_\_name\_\_ == \textcolor{stringliteral}{"{}\_\_main\_\_"{}}:}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00524}00524     unittest.main()}
\DoxyCodeLine{\Hypertarget{test__devices_8py_source_l00525}00525 }

\end{DoxyCode}
