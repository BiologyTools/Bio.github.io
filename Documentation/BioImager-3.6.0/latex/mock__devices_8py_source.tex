\hypertarget{mock__devices_8py_source}{}\doxysection{mock\+\_\+devices.\+py}
\label{mock__devices_8py_source}\index{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/testsuite/mock\_devices.py@{F:/repos/BioImager/BioImager/PythonMicroscope/microscope/testsuite/mock\_devices.py}}
\mbox{\hyperlink{mock__devices_8py}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00001}\mbox{\hyperlink{namespacemicroscope_1_1testsuite_1_1mock__devices}{00001}} \textcolor{comment}{\#!/usr/bin/env python3}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00019}00019 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00020}00020 \textcolor{stringliteral}{"{}"{}"{}Mock devices to be used in test cases.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00021}00021 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00022}00022 \textcolor{stringliteral}{These classes mock the different hardware as much as needed for our}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00023}00023 \textcolor{stringliteral}{testing needs.  Their behaviour }\textcolor{keywordflow}{is} based first on the specifications}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00024}00024 we have, \textcolor{keywordflow}{and} second on what we actually experience.  Our experience \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00025}00025 that most hardware does \textcolor{keywordflow}{not} actually follow the specs.}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00027}00027 To fake a specific device type \textcolor{keywordflow}{for} interactive usage, use the dummy}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00028}00028 device classes instead.  There\textcolor{stringliteral}{'s a concrete class for each deviceinterface.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00029}00029 \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00030}00030 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00031}00031 \textcolor{stringliteral}{import enum}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00032}00032 \textcolor{stringliteral}{import io}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00033}00033 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00034}00034 \textcolor{stringliteral}{import serial.serialutil}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00035}00035 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00036}00036 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00037}00037 \textcolor{stringliteral}{class SerialMock(serial.serialutil.SerialBase):}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00038}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock}{00038}} \textcolor{stringliteral}{    "{}"{}"{}Base class to mock devices controlled via serial.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00039}00039 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00040}00040 \textcolor{stringliteral}{    It has two :}\textcolor{keyword}{class}:`io.BytesIO` buffers.  One :func:`write`s the}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00041}00041     output buffer \textcolor{keywordflow}{and} the other :func:`read`s the input buffer.  After}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00042}00042     a write, the output buffer \textcolor{keywordflow}{is} analysed \textcolor{keywordflow}{for} a command.  If there \textcolor{keywordflow}{is}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00043}00043     a command, stuff gets done.  This usually means adding to the}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00044}00044     input buffer \textcolor{keywordflow}{and} changing state of the device.}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00046}00046     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00047}00047 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00048}00048 \textcolor{stringliteral}{    }\textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a4e3f59b8ec8931a880f5ebd417472371}{\_\_init\_\_}}(self, *args, **kwargs):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00049}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a4e3f59b8ec8931a880f5ebd417472371}{00049}}         super().\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a4e3f59b8ec8931a880f5ebd417472371}{\_\_init\_\_}}(*args, **kwargs)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00050}00050         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}} = io.BytesIO()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00051}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{00051}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{out\_buffer}} = io.BytesIO()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00052}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{00052}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00053}00053         \textcolor{comment}{\# Number of bytes in out buffer pending 'interpretation'.  A}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00054}00054         \textcolor{comment}{\# command is only interpreted and handled when EOL is seen.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00055}00055         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}} = 0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00056}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{00056}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a5df6cdda888afeffaf28ab48888bc68d}{out\_parsed\_bytes}} = 0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00057}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a5df6cdda888afeffaf28ab48888bc68d}{00057}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00058}00058         \textcolor{comment}{\# Number of bytes in the input buffer that have been read}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00059}00059         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_afa860adf095b7c2cf8123123e03769aa}{in\_read\_bytes}} = 0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00060}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_afa860adf095b7c2cf8123123e03769aa}{00060}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00061}00061     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a951a2286cc2e1e37bc32e1017319e1de}{open}}(self):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00062}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a951a2286cc2e1e37bc32e1017319e1de}{00062}}         \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00063}00063 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00064}00064     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a727318e62178417f4525b92d022f9909}{close}}(self):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00065}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a727318e62178417f4525b92d022f9909}{00065}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a727318e62178417f4525b92d022f9909}{close}}()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00066}00066         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{out\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a727318e62178417f4525b92d022f9909}{close}}()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00068}00068     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0c312585629a108b56e9a42632342678}{handle}}(self, command):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00069}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0c312585629a108b56e9a42632342678}{00069}}         \textcolor{keywordflow}{raise} NotImplementedError(\textcolor{stringliteral}{"{}sub classes need to implement handle()"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00071}00071     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ab8a494b1f2cf99f30ce057b2ad99b8fc}{write}}(self, data):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00072}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ab8a494b1f2cf99f30ce057b2ad99b8fc}{00072}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{out\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ab8a494b1f2cf99f30ce057b2ad99b8fc}{write}}(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00073}00073         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}} += len(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00075}00075         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}} > len(data):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00076}00076             \textcolor{comment}{\# we need to retrieve data from a previous write}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00077}00077             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{out\_buffer}}.seek(-\/self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}}, 2)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00078}00078             data = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a56031fdb4c018be80bd0057911331888}{out\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a1291ff3db25c2fdc90de1eca639a758f}{read}}(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00080}00080         \textcolor{keywordflow}{for} msg \textcolor{keywordflow}{in} data.split(self.eol)[:-\/1]:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00081}00081             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0c312585629a108b56e9a42632342678}{handle}}(msg)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00082}00082             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a62d44a64d7b8cc1abab715e456c7d423}{out\_pending\_bytes}} -\/= len(msg) + len(self.eol)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00083}00083         \textcolor{keywordflow}{return} len(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00084}00084 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00085}00085     \textcolor{keyword}{def }\_readx\_wrapper(self, reader, *args, **kwargs):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00086}00086         \textcolor{stringliteral}{"{}"{}"{}Place pointer of input buffer before and after read methods"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00087}00087         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.seek(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_afa860adf095b7c2cf8123123e03769aa}{in\_read\_bytes}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00088}00088         msg = reader(*args, **kwargs)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00089}00089         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_afa860adf095b7c2cf8123123e03769aa}{in\_read\_bytes}} += len(msg)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00090}00090         \textcolor{keywordflow}{return} msg}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00091}00091 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00092}00092     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a1291ff3db25c2fdc90de1eca639a758f}{read}}(self, size=1):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00093}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a1291ff3db25c2fdc90de1eca639a758f}{00093}}         \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a71650da0465902516db8714c577f3484}{\_readx\_wrapper}}(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.read, size)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00095}00095     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a72a55c76d642c9cdc3ccba65fd28a691}{readline}}(self, size=-\/1):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00096}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a72a55c76d642c9cdc3ccba65fd28a691}{00096}}         \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a71650da0465902516db8714c577f3484}{\_readx\_wrapper}}(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.readline, size)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00098}00098     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0e0bf9d131e8c341e5e0be6b97a9647a}{reset\_input\_buffer}}(self):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00099}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0e0bf9d131e8c341e5e0be6b97a9647a}{00099}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_afa860adf095b7c2cf8123123e03769aa}{in\_read\_bytes}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.getbuffer().nbytes}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00100}00100         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.seek(0, 2)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00102}00102     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a6d18fb12da1174678dfa2999b7320cb3}{reset\_output\_buffer}}(self):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00103}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a6d18fb12da1174678dfa2999b7320cb3}{00103}}         \textcolor{keywordflow}{pass}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00104}00104 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00106}00106 \textcolor{keyword}{class }CoherentSapphireLaserMock(SerialMock):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00107}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock}{00107}}     \textcolor{stringliteral}{"{}"{}"{}Modelled after a Coherent Sapphire LP 561nm laser.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00108}00108 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00109}00109 \textcolor{stringliteral}{    This mocked device }\textcolor{keywordflow}{is} constructed into the ready state.  That \textcolor{keywordflow}{is},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00110}00110     after the laser has been turned on enough time to warmup (\string~ 30}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00111}00111     seconds), \textcolor{keywordflow}{and} then the key has been turned on \textcolor{keywordflow}{for} enough time to}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00112}00112     actual get the laser ready (\string~10 seconds).}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00113}00113 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00114}00114     We don\textcolor{stringliteral}{'t mock the turning of the key, that'}s much trickier \textcolor{keywordflow}{and} we}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00115}00115     don\textcolor{stringliteral}{'t need it yet.  We'}ll do it \textcolor{keywordflow}{if} it ever becomes an issue, \textcolor{keywordflow}{and}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00116}00116     probably use a state machine library \textcolor{keywordflow}{for} that.}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00117}00117 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00118}00118     \textcolor{stringliteral}{"{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00119}00119 \textcolor{stringliteral}{}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00120}00120 \textcolor{stringliteral}{    eol = b"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00121}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a26f5a887764fef6823fa0ef0c95e632d}{00121}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00122}00122     \textcolor{comment}{\# Communication parameters}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00123}00123     baudrate = 19200}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00124}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a0a0bc61b53b02231fd7c5e6804c00c84}{00124}}     parity = serial.PARITY\_NONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00125}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_adddd78438639697f4a1f7cc06cefe7ae}{00125}}     bytesize = serial.EIGHTBITS}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00126}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a05b44e94bdabf64fceb46c63c5b99003}{00126}}     stopbits = serial.STOPBITS\_ONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00127}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a6bc89f49dc70849140e253bc9099cab2}{00127}}     rtscts = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00128}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_aa32b9435e807557a3500562c23669aca}{00128}}     dsrdtr = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00129}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a4714cbafed5aad315b48679da040e15a}{00129}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00130}00130     \textcolor{comment}{\# Laser is 200mW, range is 10 to 110\%}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00131}00131     default\_power = 50.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00132}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a4a3067b8a05dfa7899c2bddfb31b4731}{00132}}     min\_power = 20.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00133}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a70363c202adcbfa3922935093c40354b}{00133}}     max\_power = 220.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00134}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a92ecf4630e87a8578d916fcb4df349a2}{00134}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00135}00135     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a2af38319773d2198b522e119d8f38645}{\_\_init\_\_}}(self, *args, **kwargs):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00136}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a2af38319773d2198b522e119d8f38645}{00136}}         super().\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a2af38319773d2198b522e119d8f38645}{\_\_init\_\_}}(*args, **kwargs)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00138}00138         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{key}} = \textcolor{stringliteral}{"{}on"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00139}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{00139}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a12fedc0b5252ec3c8168da35b696c110}{status}} = \textcolor{stringliteral}{"{}laser ready"{}}  \textcolor{comment}{\# Laser ready, status code 5}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00140}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a12fedc0b5252ec3c8168da35b696c110}{00140}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}} = \textcolor{keyword}{True}  \textcolor{comment}{\# Light Servo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00141}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{00141}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{tec}} = \textcolor{keyword}{True}  \textcolor{comment}{\# TEC (Thermo-\/Electric Cooler) Servo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00142}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{00142}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_af5edfd4825b79f26205a676f21130b5b}{echo}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00143}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_af5edfd4825b79f26205a676f21130b5b}{00143}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a081e2c903943d161e555bc28dd061389}{prompt}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00144}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a081e2c903943d161e555bc28dd061389}{00144}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ac0c09803ab3d38837fbdef4137f13c49}{power}} = CoherentSapphireLaserMock.default\_power}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00145}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ac0c09803ab3d38837fbdef4137f13c49}{00145}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00146}00146     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(self, data):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00147}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{00147}}         \textcolor{comment}{\# Echo as soon as we get data, do not wait for an EOL.  Also,}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00148}00148         \textcolor{comment}{\# echo before handling the command because if will echo even}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00149}00149         \textcolor{comment}{\# if the command is to turn the echo off.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00150}00150         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_af5edfd4825b79f26205a676f21130b5b}{echo}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00151}00151             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00152}00152         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00153}00153             \textcolor{comment}{\# If echo is off, we still echo EOLs}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00154}00154             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a26f5a887764fef6823fa0ef0c95e632d}{eol}} * data.count(self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a26f5a887764fef6823fa0ef0c95e632d}{eol}}))}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00155}00155         \textcolor{keywordflow}{return} super().\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00157}00157     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a0a764e569a376e7bdafa08ce945515a5}{handle}}(self, command):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00158}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a0a764e569a376e7bdafa08ce945515a5}{00158}}         \textcolor{comment}{\# Operator's manual mentions all commands in uppercase.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00159}00159         \textcolor{comment}{\# Experimentation shows that they are case insensitive.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00160}00160         command = command.upper()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00161}00161 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00162}00162         answer = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00163}00163 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00164}00164         \textcolor{comment}{\# Prompt}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00165}00165         \textcolor{keywordflow}{if} command == b\textcolor{stringliteral}{"{}>=0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00166}00166             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a081e2c903943d161e555bc28dd061389}{prompt}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00167}00167         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}>=1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00168}00168             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a081e2c903943d161e555bc28dd061389}{prompt}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00169}00169 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00170}00170         \textcolor{comment}{\# Echo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00171}00171         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}E=0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00172}00172             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_af5edfd4825b79f26205a676f21130b5b}{echo}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00173}00173         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}E=1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00174}00174             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_af5edfd4825b79f26205a676f21130b5b}{echo}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00175}00175 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00176}00176         \textcolor{comment}{\# Head ID}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00177}00177         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?HID"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00178}00178             answer = b\textcolor{stringliteral}{"{}505925.000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00179}00179 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00180}00180         \textcolor{comment}{\# Head hours}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00181}00181         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?HH"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00182}00182             answer = b\textcolor{stringliteral}{"{}   257:34"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00183}00183 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00184}00184         \textcolor{comment}{\# Key switch}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00185}00185         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?K"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00186}00186             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{key}} == \textcolor{stringliteral}{"{}standby"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00187}00187                 answer = b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00188}00188             \textcolor{keywordflow}{elif} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{key}} == \textcolor{stringliteral}{"{}on"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00189}00189                 answer = b\textcolor{stringliteral}{"{}1"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00190}00190             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00191}00191                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"{}unknown key state '\%s'"{}} \% self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{key}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00192}00192 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00193}00193         \textcolor{comment}{\# Light servo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00194}00194         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}L=0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00195}00195             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00196}00196         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}L=1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00197}00197             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{tec}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00198}00198                 \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a322a6d1cd6c4046824bbb8c192f1fb25}{key}} == \textcolor{stringliteral}{"{}on"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00199}00199                     self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00200}00200                 \textcolor{comment}{\# if key switch is not on, keep light off}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00201}00201             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00202}00202                 answer = b\textcolor{stringliteral}{"{}TEC must be ON (T=1) to enable Light Output!"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00203}00203         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?L"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00204}00204             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00205}00205 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00206}00206         \textcolor{comment}{\# TEC servo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00207}00207         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}T=0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00208}00208             \textcolor{comment}{\# turning this off, also turns light servo off}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00209}00209             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{tec}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00210}00210             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00211}00211         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}T=1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00212}00212             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{tec}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00213}00213         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?T"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00214}00214             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_afa421b278cb47d11a940bcbbe5aa9fce}{tec}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00215}00215 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00216}00216         \textcolor{comment}{\# Laser power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00217}00217         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?MINLP"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00218}00218             answer = b\textcolor{stringliteral}{"{}20.000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00219}00219         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?MAXLP"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00220}00220             answer = b\textcolor{stringliteral}{"{}220.000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00221}00221         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?P"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00222}00222             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00223}00223                 answer = b\textcolor{stringliteral}{"{}0.000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00224}00224             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00225}00225                 answer = b\textcolor{stringliteral}{"{}\%.3f"{}} \% (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ac0c09803ab3d38837fbdef4137f13c49}{power}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00226}00226         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?SP"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00227}00227             answer = b\textcolor{stringliteral}{"{}\%.3f"{}} \% (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ac0c09803ab3d38837fbdef4137f13c49}{power}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00228}00228         \textcolor{keywordflow}{elif} command.startswith(b\textcolor{stringliteral}{"{}P="{}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00229}00229             new\_power = float(command[2:])}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00230}00230             \textcolor{keywordflow}{if} new\_power < 19.999999 \textcolor{keywordflow}{or} new\_power > 220.00001:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00231}00231                 answer = b\textcolor{stringliteral}{"{}value must be between 20.000 and 220.000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00232}00232             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00233}00233                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00234}00234                     answer = b\textcolor{stringliteral}{"{}Note: Laser\_Output is OFF (L=0)"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00235}00235                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ac0c09803ab3d38837fbdef4137f13c49}{power}} = new\_power}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00236}00236 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00237}00237         \textcolor{comment}{\# Nominal output power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00238}00238         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}NOMP"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00239}00239             answer = b\textcolor{stringliteral}{"{}200"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00241}00241         \textcolor{comment}{\# Laser type and nominal power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00242}00242         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}LT"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00243}00243             answer = b\textcolor{stringliteral}{"{}Sapphire 200mW"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00244}00244 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00245}00245         \textcolor{comment}{\# Laser head status}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00246}00246         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?STA"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00247}00247             status\_codes = \{}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00248}00248                 \textcolor{stringliteral}{"{}start up"{}}: b\textcolor{stringliteral}{"{}1"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00249}00249                 \textcolor{stringliteral}{"{}warmup"{}}: b\textcolor{stringliteral}{"{}2"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00250}00250                 \textcolor{stringliteral}{"{}standby"{}}: b\textcolor{stringliteral}{"{}3"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00251}00251                 \textcolor{stringliteral}{"{}laser on"{}}: b\textcolor{stringliteral}{"{}4"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00252}00252                 \textcolor{stringliteral}{"{}laser ready"{}}: b\textcolor{stringliteral}{"{}5"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00253}00253                 \textcolor{stringliteral}{"{}error"{}}: b\textcolor{stringliteral}{"{}6"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00254}00254             \}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00255}00255             answer = status\_codes[self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a12fedc0b5252ec3c8168da35b696c110}{status}}]}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00256}00256 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00257}00257         \textcolor{comment}{\# Fault related commands.  We don't model any faults yet.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00258}00258         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?F"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00259}00259             answer = b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00260}00260         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?FF"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00261}00261             \textcolor{comment}{\# Two bytes with possible faults:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00262}00262             \textcolor{comment}{\#    0 -\/ external interlock fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00263}00263             \textcolor{comment}{\#    1 -\/ diode temperature fault (both TEC and light}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00264}00264             \textcolor{comment}{\#        servo off)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00265}00265             \textcolor{comment}{\#    2 -\/ base plate temperature fault (both TEC and light}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00266}00266             \textcolor{comment}{\#        servo off)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00267}00267             \textcolor{comment}{\#    3 -\/ OEM controller LP temperature (both TEC and}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00268}00268             \textcolor{comment}{\#        light servo off)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00269}00269             \textcolor{comment}{\#    4 -\/ diode current fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00270}00270             \textcolor{comment}{\#    5 -\/ analog interface fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00271}00271             \textcolor{comment}{\#    6 -\/ base plate temperature fault (only light servo}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00272}00272             \textcolor{comment}{\#        turned off)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00273}00273             \textcolor{comment}{\#    7 -\/ diode temperature fault (only light servo turned}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00274}00274             \textcolor{comment}{\#        off)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00275}00275             \textcolor{comment}{\#    8 -\/ system warning/waiting for TEC servo to reach}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00276}00276             \textcolor{comment}{\#        target temperature}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00277}00277             \textcolor{comment}{\#    9 -\/ head EEPROM fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00278}00278             \textcolor{comment}{\#   10 -\/ OEM controller LP EEPROM fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00279}00279             \textcolor{comment}{\#   11 -\/ EEPOT1 fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00280}00280             \textcolor{comment}{\#   12 -\/ EEPOT2 fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00281}00281             \textcolor{comment}{\#   13 -\/ laser ready}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00282}00282             \textcolor{comment}{\#   14 -\/ not implemented}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00283}00283             \textcolor{comment}{\#   15 -\/ not implemented}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00284}00284             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_ab0dde8063da01e3e7076a7114aef404d}{light}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00285}00285                 \textcolor{comment}{\# Has a bit of its own, but it's not really a fault.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00286}00286                 answer = b\textcolor{stringliteral}{"{}8192"{}}  \textcolor{comment}{\# 00100000 00000000}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00287}00287             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00288}00288                 answer = b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00289}00289         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?FL"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00290}00290             \textcolor{comment}{\# Show faults in text.  This is a multiline reply, one}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00291}00291             \textcolor{comment}{\# per fault, plus the header line.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00292}00292             answer = b\textcolor{stringliteral}{"{}Fault(s):\(\backslash\)r\(\backslash\)n\(\backslash\)tNone"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00293}00293 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00294}00294         \textcolor{comment}{\# Software version}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00295}00295         \textcolor{keywordflow}{elif} command \textcolor{keywordflow}{in} [b\textcolor{stringliteral}{"{}sv"{}}, b\textcolor{stringliteral}{"{}svps"{}}]:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00296}00296             answer = b\textcolor{stringliteral}{"{}8.005"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00297}00297 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00298}00298         \textcolor{comment}{\# Nominal laser wavelength}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00299}00299         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?WAVE"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00300}00300             answer = b\textcolor{stringliteral}{"{}561"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00301}00301 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00302}00302         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00303}00303             \textcolor{keywordflow}{raise} NotImplementedError(}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00304}00304                 \textcolor{stringliteral}{"{}no handling for command '\%s'"{}} \% command.decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00305}00305             )}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00306}00306 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00307}00307         \textcolor{keywordflow}{if} answer \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00308}00308             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(answer + self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a26f5a887764fef6823fa0ef0c95e632d}{eol}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00309}00309 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00310}00310         \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a081e2c903943d161e555bc28dd061389}{prompt}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00311}00311             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_coherent_sapphire_laser_mock_a27e288b76da0e0cf2b8436e4345b6ac8}{write}}(b\textcolor{stringliteral}{"{}Sapphire:0-\/> "{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00312}00312         \textcolor{keywordflow}{return}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00313}00313 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00314}00314 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00315}00315 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock}{CoboltLaserMock}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock}{SerialMock}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00316}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock}{00316}}     \textcolor{stringliteral}{"{}"{}"{}Modelled after a Cobolt Jive laser 561nm."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00317}00317 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00318}00318     eol = b\textcolor{stringliteral}{"{}\(\backslash\)r"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00319}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aec16fea4d06bc06b01839f6042fea5f3}{00319}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00320}00320     baudrate = 115200}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00321}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a18d801d60f554c075ba1d291c27935b2}{00321}}     parity = serial.PARITY\_NONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00322}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_ad1317a6632e2cc72831ce12e755fef00}{00322}}     bytesize = serial.EIGHTBITS}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00323}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a9349ad6f5bbcc09375424ad7f8788814}{00323}}     stopbits = serial.STOPBITS\_ONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00324}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a4f87be555de7f6b2509299c2d71d0e68}{00324}}     rtscts = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00325}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a4f9bd89db9b5aeac52c4db3f6bf5a7be}{00325}}     dsrdtr = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00326}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_ac376f4c7635a27750b0909a2da0845e1}{00326}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00327}00327     \textcolor{comment}{\# Values in mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00328}00328     default\_power = 50.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00329}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_acc0a7d9c1c9b552daced6f90321431bc}{00329}}     min\_power = 0.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00330}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aad9782a29c0bb419682a7502777a5b71}{00330}}     max\_power = 600.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00331}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adeff54f7a76bb23f6655928e2ce381d8}{00331}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00332}00332     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aa7b09fde39935bb812c2b78317a84710}{\_\_init\_\_}}(self, *args, **kwargs):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00333}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aa7b09fde39935bb812c2b78317a84710}{00333}}         super().\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aa7b09fde39935bb812c2b78317a84710}{\_\_init\_\_}}(*args, **kwargs)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00334}00334 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00335}00335         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a6e87fc2e33a4d3ba618236e68d88ad9d}{power}} = CoboltLaserMock.default\_power}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00336}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a6e87fc2e33a4d3ba618236e68d88ad9d}{00336}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00337}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{00337}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00338}00338         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aca61c274b085e4a3c891e6ce65f3604f}{interlock\_open}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00339}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aca61c274b085e4a3c891e6ce65f3604f}{00339}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00340}00340         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{auto\_start}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00341}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{00341}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d5200cb9c5e9e5a0358baa04c8aa01c}{direct\_control}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00342}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d5200cb9c5e9e5a0358baa04c8aa01c}{00342}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00343}00343         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adea3368f67fd6f4972381781c091fc69}{on\_after\_interlock}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00344}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adea3368f67fd6f4972381781c091fc69}{00344}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00345}00345         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a34433774f569c11b7b2558faf4631992}{fault}} = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00346}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a34433774f569c11b7b2558faf4631992}{00346}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00347}00347     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a1db0f40adb9cfd5e2d6ba57e1707f906}{handle}}(self, command):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00348}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a1db0f40adb9cfd5e2d6ba57e1707f906}{00348}}         \textcolor{comment}{\# Leading and trailing whitespace is ignored.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00349}00349         command = command.strip()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00350}00350 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00351}00351         \textcolor{comment}{\# Acknowledgment string if command is not a query and there}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00352}00352         \textcolor{comment}{\# is no error.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00353}00353         answer = b\textcolor{stringliteral}{"{}OK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00354}00354 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00355}00355         \textcolor{keywordflow}{if} command == b\textcolor{stringliteral}{"{}sn?"{}}:  \textcolor{comment}{\# serial number}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00356}00356             answer = b\textcolor{stringliteral}{"{}7863"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00357}00357         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}gcn?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00358}00358             answer = b\textcolor{stringliteral}{"{}Macro-\/Gen5b-\/SHG-\/0501\_4W-\/RevA"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00359}00359         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}ver?"{}} \textcolor{keywordflow}{or} command == b\textcolor{stringliteral}{"{}gfv?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00360}00360             answer = b\textcolor{stringliteral}{"{}50070"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00361}00361         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}gfvlas?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00362}00362             answer = b\textcolor{stringliteral}{"{}This laser head does not have firmware."{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00363}00363         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}hrs?"{}}:  \textcolor{comment}{\# System operating hours}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00364}00364             answer = b\textcolor{stringliteral}{"{}828.98"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00365}00365 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00366}00366         \textcolor{comment}{\# TODO: This whole @cob0 and @cob1 need better testing on}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00367}00367         \textcolor{comment}{\# what it actually does.  Documentation says that @cob1 is}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00368}00368         \textcolor{comment}{\# "{}Laser ON after interlock.  Forces laser into}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00369}00369         \textcolor{comment}{\# autostart. without checking if autostart is enabled"{}.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00370}00370         \textcolor{comment}{\# @cob0 is undocumented.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00371}00371 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00372}00372         \textcolor{comment}{\# May be a bug but the commands @cob0 and @cob1 both have the}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00373}00373         \textcolor{comment}{\# effect of also turning off the laser.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00374}00374         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cob1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00375}00375             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adea3368f67fd6f4972381781c091fc69}{on\_after\_interlock}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00376}00376             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00377}00377         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cob0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00378}00378             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adea3368f67fd6f4972381781c091fc69}{on\_after\_interlock}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00379}00379             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00380}00380 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00381}00381         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobas?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00382}00382             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{auto\_start}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00383}00383         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobas 0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00384}00384             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{auto\_start}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00385}00385         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobas 1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00386}00386             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{auto\_start}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00387}00387 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00388}00388         \textcolor{comment}{\# Laser state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00389}00389         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}l?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00390}00390             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00391}00391         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}l1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00392}00392             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a159ea0d511188368c2b9c26972db269f}{auto\_start}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00393}00393                 answer = b\textcolor{stringliteral}{"{}Syntax error: not allowed in autostart mode."{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00394}00394             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00395}00395                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00396}00396         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}l0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00397}00397             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00398}00398 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00399}00399         \textcolor{comment}{\# Output power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00400}00400         \textcolor{keywordflow}{elif} command.startswith(b\textcolor{stringliteral}{"{}p "{}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00401}00401             \textcolor{comment}{\# The p command takes values in W so convert to mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00402}00402             new\_power = float(command[2:]) * 1000.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00403}00403             \textcolor{keywordflow}{if} new\_power > self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adeff54f7a76bb23f6655928e2ce381d8}{max\_power}} \textcolor{keywordflow}{or} new\_power < self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aad9782a29c0bb419682a7502777a5b71}{min\_power}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00404}00404                 answer = b\textcolor{stringliteral}{"{}Syntax error: Value is out of range."{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00405}00405             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00406}00406                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a6e87fc2e33a4d3ba618236e68d88ad9d}{power}} = new\_power}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00407}00407         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}p?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00408}00408             answer = b\textcolor{stringliteral}{"{}\%.4f"{}} \% (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a6e87fc2e33a4d3ba618236e68d88ad9d}{power}} / 1000.0)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00409}00409         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}pa?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00410}00410             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00411}00411                 answer = b\textcolor{stringliteral}{"{}\%.4f"{}} \% (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a6e87fc2e33a4d3ba618236e68d88ad9d}{power}} / 1000.0)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00412}00412             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00413}00413                 answer = b\textcolor{stringliteral}{"{}0.0000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00414}00414 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00415}00415         \textcolor{comment}{\# Undocumented.  Seems to be the same as 'p ...'}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00416}00416         \textcolor{keywordflow}{elif} command.startswith(b\textcolor{stringliteral}{"{}@cobasp "{}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00417}00417             \textcolor{keywordflow}{return} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0c312585629a108b56e9a42632342678}{handle}}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a1db0f40adb9cfd5e2d6ba57e1707f906}{handle}}(command[6:])}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00418}00418 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00419}00419         \textcolor{comment}{\# Direct control}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00420}00420         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobasdr?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00421}00421             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d5200cb9c5e9e5a0358baa04c8aa01c}{direct\_control}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00422}00422         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobasdr 0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00423}00423             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d5200cb9c5e9e5a0358baa04c8aa01c}{direct\_control}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00424}00424         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}@cobasdr 1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00425}00425             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d5200cb9c5e9e5a0358baa04c8aa01c}{direct\_control}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00426}00426 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00427}00427         \textcolor{comment}{\# Undocumented.  Seems to returns maximum laser power in mW.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00428}00428         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}gmlp?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00429}00429             answer = b\textcolor{stringliteral}{"{}600.000000"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00430}00430 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00431}00431         \textcolor{comment}{\# Are you there?}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00432}00432         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00433}00433             answer = b\textcolor{stringliteral}{"{}OK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00434}00434 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00435}00435         \textcolor{comment}{\# Get operating fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00436}00436         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}f?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00437}00437             \textcolor{comment}{\# The errors (which we don't model yet) are:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00438}00438             \textcolor{comment}{\#   1 = temperature error}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00439}00439             \textcolor{comment}{\#   3 = interlock}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00440}00440             \textcolor{comment}{\#   4 = constant power fault}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00441}00441             answer = b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00442}00442 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00443}00443         \textcolor{comment}{\# Interlock state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00444}00444         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}ilk?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00445}00445             answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_aca61c274b085e4a3c891e6ce65f3604f}{interlock\_open}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00446}00446 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00447}00447         \textcolor{comment}{\# Autostart program state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00448}00448         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}cobast?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00449}00449             \textcolor{comment}{\# This is completely undocumented.  Manual}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00450}00450             \textcolor{comment}{\# experimentation seems to be:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00451}00451             \textcolor{comment}{\# 0 = laser off with @cob0}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00452}00452             \textcolor{comment}{\# 1 = laser off with @cob1}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00453}00453             \textcolor{comment}{\# 2 = waiting for temperature}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00454}00454             \textcolor{comment}{\# 3 = warming up}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00455}00455             \textcolor{comment}{\# 4 = completed (laser on)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00456}00456             \textcolor{comment}{\# 5 = fault (such as interlock)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00457}00457             \textcolor{comment}{\# 6 = aborted}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00458}00458             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_a3d46aafaec307c575a6c740e84ea5863}{light}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00459}00459                 answer = b\textcolor{stringliteral}{"{}4"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00460}00460             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00461}00461                 answer = b\textcolor{stringliteral}{"{}1"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_cobolt_laser_mock_adea3368f67fd6f4972381781c091fc69}{on\_after\_interlock}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00462}00462 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00463}00463         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00464}00464             \textcolor{keywordflow}{raise} NotImplementedError(}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00465}00465                 \textcolor{stringliteral}{"{}no handling for command '\%s'"{}} \% command.decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00466}00466             )}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00467}00467 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00468}00468         \textcolor{comment}{\# Sending a command is done with '\(\backslash\)r' only.  However,}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00469}00469         \textcolor{comment}{\# responses from the hardware end with '\(\backslash\)r\(\backslash\)n'.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00470}00470         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ab8a494b1f2cf99f30ce057b2ad99b8fc}{write}}(answer + b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00471}00471 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00472}00472 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00473}00473 \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock}{OmicronDeepstarLaserMock}}(\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock}{SerialMock}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00474}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock}{00474}}     \textcolor{stringliteral}{"{}"{}"{}Modelled after a TA Deepstar 488nm."{}"{}"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00475}00475 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00476}00476     eol = b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00477}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a9d1965f4e7eb04aed461f05ef6e3be9b}{00477}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00478}00478     baudrate = 9600}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00479}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a8cb7d298a4e142b112f650ca086d6ffe}{00479}}     parity = serial.PARITY\_NONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00480}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ae63286f17a5dea9d5ffc99c6c0110237}{00480}}     bytesize = serial.EIGHTBITS}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00481}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a4d6805bd9c7197517137efa7233d4c2d}{00481}}     stopbits = serial.STOPBITS\_ONE}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00482}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a7632723d1f0d672607e3c4fe763aafab}{00482}}     rtscts = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00483}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a583fb81de4105b3ec4eec5ed742ed3f3}{00483}}     dsrdtr = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00484}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a88f62534f15ba94259c2499c11abab2d}{00484}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00485}00485     \textcolor{comment}{\# Values in mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00486}00486     default\_power = 50.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00487}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a3f3f8f74c9b1e4314429b2fa1e5f4388}{00487}}     min\_power = 0.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00488}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a893a80664bc10a9b40415e3f220f978b}{00488}}     max\_power = 200.0}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00489}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a665816294fcba95e4d831a91bb7bb878}{00489}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00490}00490     \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}(enum.Enum):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00491}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{00491}}         S0 = 0  \textcolor{comment}{\# Global error state or interlocked state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00492}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state_a9176137b1289fc8060b76bd192386b0a}{00492}}         S1 = 1  \textcolor{comment}{\# Standby state or Laser OFF state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00493}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state_aae065df3787034997c566a49ddccda34}{00493}}         S2 = 2  \textcolor{comment}{\# Laser ON state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00494}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state_a1b23a0cf28d789ec7a5ad2f8f717ca28}{00494}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00495}00495     \textcolor{keyword}{class }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode}{Mode}}(enum.Enum):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00496}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode}{00496}}         blackout = 1}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00497}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode_acff337a104280b02fe86900a334cef53}{00497}}         bias = 2}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00498}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode_a23703b7b7d2baac89fddb8c21e78005d}{00498}}         modulated = 3}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00499}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode_ace36865bb0c915188d5d04c89cbd8266}{00499}}         deepstar = 4}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00500}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode_a1ac7629cf822a10fca5bc1f9740e3a5f}{00500}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00501}00501     command2mode = \{}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00502}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab318083558ad8568c8ebe72f3b7b2ead}{00502}}         b\textcolor{stringliteral}{"{}L0"{}}: Mode.blackout,}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00503}00503         b\textcolor{stringliteral}{"{}BLK"{}}: Mode.blackout,}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00504}00504         b\textcolor{stringliteral}{"{}LB"{}}: Mode.bias,}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00505}00505         b\textcolor{stringliteral}{"{}L1"{}}: Mode.modulated,}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00506}00506         b\textcolor{stringliteral}{"{}L2"{}}: Mode.deepstar,}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00507}00507     \}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00508}00508     mode2answer = \{}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00509}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a2f30e6771ea36c0d27fc0a496f0e7671}{00509}}         Mode.blackout: b\textcolor{stringliteral}{"{}L0"{}},  \textcolor{comment}{\# always L0, even if BLK was used}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00510}00510         Mode.bias: b\textcolor{stringliteral}{"{}LB"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00511}00511         Mode.modulated: b\textcolor{stringliteral}{"{}L1"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00512}00512         Mode.deepstar: b\textcolor{stringliteral}{"{}L2"{}},}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00513}00513     \}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00514}00514 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00515}00515     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab4f37ee4b91f040ef37f80077c301525}{\_\_init\_\_}}(self, *args, **kwargs):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00516}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab4f37ee4b91f040ef37f80077c301525}{00516}}         super().\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab4f37ee4b91f040ef37f80077c301525}{\_\_init\_\_}}(*args, **kwargs)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00517}00517 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00518}00518         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad13b223becd6632304b3cadb60dca714}{power}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a3f3f8f74c9b1e4314429b2fa1e5f4388}{default\_power}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00519}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad13b223becd6632304b3cadb60dca714}{00519}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00520}00520         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S1  \textcolor{comment}{\# default dependent on 'ASx' command}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00521}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{00521}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode}{Mode}}.blackout}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00522}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{00522}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00523}00523         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{internal\_peak\_power}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00524}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{00524}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{analog2digital}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00525}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{00525}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{bias\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00526}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{00526}}         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00527}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{00527}} }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00528}00528     \textcolor{preprocessor}{@property}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00529}00529     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a96d27ec0c7a9872f49857bad7a6e9bdb}{light}}(self):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00530}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a96d27ec0c7a9872f49857bad7a6e9bdb}{00530}}         \textcolor{keywordflow}{if} (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00531}00531             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} != self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00532}00532             \textcolor{keywordflow}{or} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}}.blackout}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00533}00533             \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{internal\_peak\_power}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00534}00534             \textcolor{keywordflow}{or} (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{analog2digital}} \textcolor{keywordflow}{and} \textcolor{keywordflow}{not} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00535}00535         ):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00536}00536             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00537}00537         \textcolor{keywordflow}{return} \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00538}00538 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00539}00539     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a93fed163593028460938158583499d83}{write}}(self, data):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00540}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a93fed163593028460938158583499d83}{00540}}         \textcolor{comment}{\# This connection does not wait for an eol to parse the}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00541}00541         \textcolor{comment}{\# command.  It only looks at 16 or 7 bit (depending on}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00542}00542         \textcolor{comment}{\# state).  Sending a message one character at a time will not}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00543}00543         \textcolor{comment}{\# work so just send the whole data to be handled.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00544}00544         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_a0c312585629a108b56e9a42632342678}{handle}}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a27bccfc0aeba9296fda0342bc67e569b}{handle}}(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00545}00545         \textcolor{keywordflow}{return} len(data)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00546}00546 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00547}00547     \textcolor{keyword}{def }\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a27bccfc0aeba9296fda0342bc67e569b}{handle}}(self, command):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00548}\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a27bccfc0aeba9296fda0342bc67e569b}{00548}}         \textcolor{keywordflow}{if} len(command) != 16 \textcolor{keywordflow}{and} (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00549}00549             len(command) != 7 \textcolor{keywordflow}{and} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} != self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00550}00550         ):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00551}00551             \textcolor{comment}{\# Such a thing will make the laser go into S0 state which}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00552}00552             \textcolor{comment}{\# will also turns it off..  We don't model this because}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00553}00553             \textcolor{comment}{\# we don't know well how the reset (RST command) works.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00554}00554             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"{}invalid Omicron Deepstar command"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00555}00555         \textcolor{keywordflow}{elif} command[-\/2:] != b\textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00556}00556             \textcolor{comment}{\# Even if a command is correct, the last two characters}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00557}00557             \textcolor{comment}{\# need to be \(\backslash\)r\(\backslash\)n.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00558}00558             \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"{}command does not end in '\(\backslash\)\(\backslash\)r\(\backslash\)\(\backslash\)n'"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00559}00559 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00560}00560         command = command[:-\/2].rstrip(b\textcolor{stringliteral}{"{} "{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00561}00561         answer = \textcolor{keywordtype}{None}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00562}00562 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00563}00563         \textcolor{keywordflow}{if} command == b\textcolor{stringliteral}{"{}S?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00564}00564             answer = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}}.name.encode()}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00565}00565         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}STAT0"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00566}00566             \textcolor{comment}{\# Model-\/code of the connected lasersystem:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00567}00567             answer = (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00568}00568                 b\textcolor{stringliteral}{"{}MC"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00569}00569                 + b\textcolor{stringliteral}{"{} 488"{}}  \textcolor{comment}{\# wavelength}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00570}00570                 + b\textcolor{stringliteral}{"{} "{}}  \textcolor{comment}{\# empty for single diode system (D for double)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00571}00571                 + b\textcolor{stringliteral}{"{} \%3d"{}} \% (self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a665816294fcba95e4d831a91bb7bb878}{max\_power}})  \textcolor{comment}{\# in mw}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00572}00572                 + b\textcolor{stringliteral}{"{} TA   "{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00573}00573             )  \textcolor{comment}{\# controller version / operating mode}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00574}00574         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}STAT1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00575}00575             answer = (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00576}00576                 b\textcolor{stringliteral}{"{}SL"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00577}00577                 + b\textcolor{stringliteral}{"{} 6AB"{}}  \textcolor{comment}{\# actual bias (hexadecimal)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00578}00578                 + b\textcolor{stringliteral}{"{} 600"{}}  \textcolor{comment}{\# modulated bias-\/level (hexadecimal)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00579}00579                 + b\textcolor{stringliteral}{"{} 868"{}}  \textcolor{comment}{\# mod-\/level internal set for drive max. current}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00580}00580                 + b\textcolor{stringliteral}{"{} T249"{}}  \textcolor{comment}{\# diode temperature (in celcius * 10)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00581}00581                 + b\textcolor{stringliteral}{"{} V117"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00582}00582             )  \textcolor{comment}{\# control voltage (in volts * 10)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00583}00583         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}STAT2"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00584}00584             answer = (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00585}00585                 b\textcolor{stringliteral}{"{}R111"{}}  \textcolor{comment}{\# firmware release}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00586}00586                 + b\textcolor{stringliteral}{"{} N02"{}}  \textcolor{comment}{\# No used laserpen}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00587}00587                 + b\textcolor{stringliteral}{"{} SNP131056"{}}  \textcolor{comment}{\# S/No of laserhead}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00588}00588                 + b\textcolor{stringliteral}{"{} SNC131056"{}}  \textcolor{comment}{\# S/No of controller}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00589}00589                 + b\textcolor{stringliteral}{"{} WH 04667"{}}  \textcolor{comment}{\# working hours}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00590}00590                 + b\textcolor{stringliteral}{"{} SLS B9C 500"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00591}00591             )  \textcolor{comment}{\# start values for the diode parameters}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00592}00592         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}STAT3"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00593}00593             \textcolor{comment}{\# Stored option code flags.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00594}00594             answer = (}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00595}00595                 b\textcolor{stringliteral}{"{}OC "{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00596}00596                 + b\textcolor{stringliteral}{"{}AS1"{}}  \textcolor{comment}{\# autostart option}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00597}00597                 + b\textcolor{stringliteral}{"{}TH0"{}}  \textcolor{comment}{\# TTL-\/logic-\/high}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00598}00598                 + b\textcolor{stringliteral}{"{}AP0"{}}  \textcolor{comment}{\# auto power correction}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00599}00599                 + b\textcolor{stringliteral}{"{}FK0"{}}  \textcolor{comment}{\# fiber coupling single mode}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00600}00600                 + b\textcolor{stringliteral}{"{}AC0"{}}  \textcolor{comment}{\# analog modulation for CW-\/lasers}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00601}00601                 + b\textcolor{stringliteral}{"{}AM0"{}}  \textcolor{comment}{\# analog modulation for modulated lasers}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00602}00602                 + b\textcolor{stringliteral}{"{}SU0"{}}  \textcolor{comment}{\# subtractive analog modulation for modulated lasers}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00603}00603                 + b\textcolor{stringliteral}{"{}CO0"{}}  \textcolor{comment}{\# collimator optic}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00604}00604                 + b\textcolor{stringliteral}{"{}FO0"{}}  \textcolor{comment}{\# focusing optic}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00605}00605                 + b\textcolor{stringliteral}{"{}MO0"{}}  \textcolor{comment}{\# highspeed monitoring}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00606}00606                 + b\textcolor{stringliteral}{"{}US0"{}}  \textcolor{comment}{\# USB interface}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00607}00607                 + b\textcolor{stringliteral}{"{}LA1"{}}  \textcolor{comment}{\# RS232 interface}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00608}00608                 + b\textcolor{stringliteral}{"{}FA0"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00609}00609             )  \textcolor{comment}{\# fiber coupling single mode}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00610}00610 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00611}00611         \textcolor{comment}{\# Changing mode}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00612}00612         \textcolor{keywordflow}{elif} command \textcolor{keywordflow}{in} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab318083558ad8568c8ebe72f3b7b2ead}{command2mode}}.keys():}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00613}00613             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00614}00614                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ab318083558ad8568c8ebe72f3b7b2ead}{command2mode}}[command]}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00615}00615                 answer = b\textcolor{stringliteral}{"{}>"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00616}00616             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00617}00617                 answer = b\textcolor{stringliteral}{"{}UK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00618}00618 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00619}00619         \textcolor{comment}{\# Current mode (undocumented)}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00620}00620         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}L?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00621}00621             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00622}00622                 answer = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a2f30e6771ea36c0d27fc0a496f0e7671}{mode2answer}}[self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}}]}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00623}00623             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00624}00624                 answer = b\textcolor{stringliteral}{"{}UK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00625}00625 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00626}00626         \textcolor{comment}{\# Laser on}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00627}00627         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}LON"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00628}00628             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S1:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00629}00629                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00630}00630                 answer = b\textcolor{stringliteral}{"{}LONOK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00631}00631             \textcolor{keywordflow}{elif} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_aa721ec2727049c08fbf5a708aed5fc83}{mode}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_mode}{Mode}}.S2:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00632}00632                 answer = b\textcolor{stringliteral}{"{}UK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00633}00633             \textcolor{keywordflow}{else}:  \textcolor{comment}{\# in S0 state}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00634}00634                 \textcolor{comment}{\# This is undocumented and it's probably a bug on}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00635}00635                 \textcolor{comment}{\# their firmware.  Should probably be returning UK.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00636}00636                 answer = b\textcolor{stringliteral}{"{}INT"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00637}00637 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00638}00638         \textcolor{comment}{\# Laser off}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00639}00639         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}LF"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00640}00640             \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} == self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S2:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00641}00641                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a10fb876ed29050d5db23fd3d71634726}{state}} = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_1_1_state}{State}}.S1}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00642}00642                 answer = b\textcolor{stringliteral}{"{}LOFFOK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00643}00643             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00644}00644                 answer = b\textcolor{stringliteral}{"{}UK"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00645}00645 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00646}00646         \textcolor{comment}{\# Peak Power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00647}00647         \textcolor{keywordflow}{elif} command.startswith(b\textcolor{stringliteral}{"{}PP"{}}):}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00648}00648             \textcolor{comment}{\# peak power values are a 3 byte char hexadecimal number,}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00649}00649             \textcolor{comment}{\# scale to the range of possible power:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00650}00650             \textcolor{comment}{\#     000[hex] =    0[dec] =   0\% =   0 mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00651}00651             \textcolor{comment}{\#     FFF[hex] = 4095[dec] = 100\% = 200 mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00652}00652             \textcolor{keywordflow}{if} command == b\textcolor{stringliteral}{"{}PP?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00653}00653                 level = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad13b223becd6632304b3cadb60dca714}{power}} / self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a665816294fcba95e4d831a91bb7bb878}{max\_power}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00654}00654                 answer = b\textcolor{stringliteral}{"{}PP\%03X"{}} \% round(float(0xFFF) * level)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00655}00655             \textcolor{keywordflow}{elif} len(command) == 5:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00656}00656                 level = int(command[2:], 16) / float(0xFFF)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00657}00657                 self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad13b223becd6632304b3cadb60dca714}{power}} = level * self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a665816294fcba95e4d831a91bb7bb878}{max\_power}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00658}00658                 answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00659}00659             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00660}00660                 \textcolor{keywordflow}{raise} RuntimeError(\textcolor{stringliteral}{"{}invalid command '\%'"{}} \% command)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00661}00661 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00662}00662         \textcolor{comment}{\# Power level}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00663}00663         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}P?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00664}00664             \textcolor{comment}{\# TODO: get a laser that supports this command to test.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00665}00665             \textcolor{comment}{\# This is only based on the documentation.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00666}00666             \textcolor{comment}{\#}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00667}00667             \textcolor{comment}{\# Actual laser power is a 4 byte char heaxadecimal}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00668}00668             \textcolor{comment}{\# number.  Range for actual laser power is:}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00669}00669             \textcolor{comment}{\#     0x0000 =    0 [dec] =   0\% =   0 mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00670}00670             \textcolor{comment}{\#     0x0CCC = 3276 [dec] = 100\% = 200 mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00671}00671             \textcolor{comment}{\#     0x0FFF = 4095 [dec] = 120\% = 240 mW}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00672}00672             level = self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad13b223becd6632304b3cadb60dca714}{power}} / self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a665816294fcba95e4d831a91bb7bb878}{max\_power}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00673}00673             answer = b\textcolor{stringliteral}{"{}P\%04X"{}} \% round(float(0xCCC) * level)}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00674}00674 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00675}00675         \textcolor{comment}{\# Internal peak power}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00676}00676         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}IPO"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00677}00677             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{internal\_peak\_power}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00678}00678             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00679}00679         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}IPF"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00680}00680             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{internal\_peak\_power}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00681}00681             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00682}00682         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}IP?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00683}00683             answer = b\textcolor{stringliteral}{"{}IPO"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_ad400fdb9fecc94cceb16639440cba6cf}{internal\_peak\_power}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}IPF"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00684}00684 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00685}00685         \textcolor{comment}{\# Analogue modulation path or signal linked to the digital}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00686}00686         \textcolor{comment}{\# modulation path.}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00687}00687         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}A2DO"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00688}00688             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{analog2digital}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00689}00689             answer = b\textcolor{stringliteral}{"{}A2D ON"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00690}00690         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}A2DF"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00691}00691             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{analog2digital}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00692}00692             answer = b\textcolor{stringliteral}{"{}A2D OFF"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00693}00693         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}A2D?"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00694}00694             answer = b\textcolor{stringliteral}{"{}A2D ON"{}} \textcolor{keywordflow}{if} self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_afade377c8966d62ecbd72c5e83944f78}{analog2digital}} \textcolor{keywordflow}{else} b\textcolor{stringliteral}{"{}A2D OFF"{}}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00695}00695 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00696}00696         \textcolor{comment}{\# Bias and Digital modulation}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00697}00697         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}MF"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00698}00698             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{bias\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00699}00699             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00700}00700             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00701}00701         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}MO1"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00702}00702             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{bias\_modulation}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00703}00703             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00704}00704             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00705}00705         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}MO2"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00706}00706             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{bias\_modulation}} = \textcolor{keyword}{False}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00707}00707             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00708}00708             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00709}00709         \textcolor{keywordflow}{elif} command == b\textcolor{stringliteral}{"{}MO3"{}}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00710}00710             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a634544de30cd75d1c5e5a26f6337822c}{bias\_modulation}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00711}00711             self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a262077d13e7bc009c5f62f25db8d56f4}{digital\_modulation}} = \textcolor{keyword}{True}}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00712}00712             answer = command}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00713}00713 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00714}00714         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00715}00715             \textcolor{keywordflow}{raise} NotImplementedError(}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00716}00716                 \textcolor{stringliteral}{"{}no handling for command '\%s'"{}} \% command.decode(\textcolor{stringliteral}{"{}utf-\/8"{}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00717}00717             )}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00718}00718 }
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00719}00719         self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_serial_mock_ad8be9c16f92ff7271670be312647d4a7}{in\_buffer}}.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a93fed163593028460938158583499d83}{write}}(answer + self.\mbox{\hyperlink{classmicroscope_1_1testsuite_1_1mock__devices_1_1_omicron_deepstar_laser_mock_a9d1965f4e7eb04aed461f05ef6e3be9b}{eol}})}
\DoxyCodeLine{\Hypertarget{mock__devices_8py_source_l00720}00720 }

\end{DoxyCode}
